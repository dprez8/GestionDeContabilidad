(function(e){function t(t){for(var o,i,n=t[0],c=t[1],l=t[2],u=0,g=[];u<n.length;u++)i=n[u],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&g.push(s[i][0]),s[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);d&&d(t);while(g.length)g.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],o=!0,n=1;n<a.length;n++){var c=a[n];0!==s[c]&&(o=!1)}o&&(r.splice(t--,1),e=i(i.s=a[0]))}return e}var o={},s={index:0},r=[];function i(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=o,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(a,o,function(t){return e[t]}.bind(null,o));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=t,n=n.slice();for(var l=0;l<n.length;l++)t(n[l]);var d=c;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("8d7d")},"1d51":function(e,t,a){},"1d92":function(e,t,a){"use strict";a("1d51")},"1dc2":function(e,t,a){"use strict";a("9a12")},"1ffb":function(e,t,a){},2179:function(e,t,a){"use strict";a("d051")},"35fb":function(e,t,a){"use strict";a("3eb2")},"3eb2":function(e,t,a){},5244:function(e,t,a){e.exports=a.p+"img/thinking.596f1f68.svg"},"5ca3":function(e,t,a){"use strict";a("7f10")},"5ffa":function(e,t,a){e.exports=a.p+"img/gesoc_logo.56d0443f.png"},7429:function(e,t,a){},"7f10":function(e,t,a){},"8d27":function(e,t,a){},"8d7d":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),s=a("8c4f"),r=a("5f5b"),i=a("b1e0"),n=(a("f9e3"),a("2dd8"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)}),c=[],l={},d=l,u=(a("cb73"),a("2877")),g=Object(u["a"])(d,n,c,!1,null,null,null),p=g.exports,m=(a("b0c0"),a("bc3a")),v=a.n(m),f=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("nav",{staticClass:"navbar navbar-expand-md navbar-dark d-flex bg-dark flex-nowrap"},[o("button",{staticClass:"navbar-toggler border-0 p-1 mr-2",attrs:{"data-toggle":"collapse"},on:{click:function(t){e.sidebarShow=!e.sidebarShow}}},[o("span",{staticClass:"navbar-toggler-icon"})]),o("router-link",{staticClass:"navbar-brand mr-2",attrs:{id:"navbar-organizacion",to:"/"}},[o("img",{staticClass:"d-inline-block align-top",staticStyle:{filter:"invert(1)"},attrs:{src:a("929a"),width:"30",height:"30"}}),o("span",{staticClass:"p-2"},[e._v(e._s(e.userData.organizacion))])]),o("div",{staticClass:"ml-auto user-panel-avatar",on:{click:function(t){e.userPanelShow=!0}}},[o("b-avatar",{attrs:{variant:"primary",text:e.userData.nombre.substring(0,1)}})],1)],1),o("div",{staticClass:"d-flex",class:{toggled:!e.sidebarShow},attrs:{id:"wrapper"}},[o("div",{staticClass:"border-right",attrs:{id:"sidebar-wrapper"}},[o("b-list-group",{attrs:{flush:""}},[e._l(e.sidebar,(function(t,a){return[o("b-list-group-item",{key:a,attrs:{to:t.path},nativeOn:{click:function(t){e.sidebarShow=!0}}},[e._v(e._s(t.label))])]}))],2)],1),o("div",{staticClass:"w-100 overflow-auto"},[o("b-breadcrumb",{staticClass:"m-0 border-bottom bg-light",staticStyle:{"border-radius":"0"}},[o("b-breadcrumb-item",{attrs:{to:"/"}},[o("b-icon-house")],1),e._l(e.breadcrumb,(function(t,a){return[o("b-breadcrumb-item",{key:a,attrs:{to:t.path,active:t.active}},[e._v(" "+e._s(t.label)+" ")])]}))],2),o("div",{staticClass:"overflow-auto",staticStyle:{height:"calc(100vh - 106px)"}},[o("transition",{attrs:{name:"fade",mode:"out-in"}},[o("router-view",{key:e.routerViewKey})],1)],1)],1)]),o("b-modal",{attrs:{"hide-footer":"","hide-header":"","hide-backdrop":"","body-class":"p-0 rounded overflow-hidden","dialog-class":"user-panel","content-class":"shadow"},model:{value:e.userPanelShow,callback:function(t){e.userPanelShow=t},expression:"userPanelShow"}},[o("b-list-group",{attrs:{flush:""}},[o("b-list-group-item",{attrs:{to:"/cuenta"},on:{click:function(t){e.userPanelShow=!1}}},[o("b-icon-person-fill",{staticClass:"mr-2"}),e._v(" "+e._s(e.userData.nombre)+" ")],1),o("b-list-group-item",{attrs:{to:"#"},on:{click:e.logout}},[o("b-icon-box-arrow-left",{staticClass:"mr-2"}),e._v(" Cerrar sesión ")],1)],1)],1),o("b-modal",{attrs:{id:"login-modal",centered:"","hide-footer":"","hide-header":"","no-close-on-esc":"","no-close-on-backdrop":"",size:"sm"}},[o("div",[o("h3",[e._v("Se cerró la sesión")]),o("p",[e._v("Vuelva a iniciar sesión para continuar")]),o("loginForm",{on:{loginSuccess:e.loginSuccess}})],1)]),o("b-modal",{attrs:{id:"spark-modal","ok-title":"Cerrar","ok-only":"","hide-header":"",size:"sm","modal-class":"modal-fullscreen"}},[o("iframe",{staticStyle:{width:"100%",height:"100%"},attrs:{srcdoc:e.debugSparkModalHTML}},[o("p",[e._v("Your browser does not support iframes.")])])])],1)},h=[],b=(a("4160"),a("ac1f"),a("5319"),a("159b"),a("c975"),a("fb6a"),a("1276"),a("d4ec")),C=a("bee2");function _(e){var t=new Date(Date.parse(e));return("0"+t.getDate()).slice(-2)+"/"+("0"+(t.getMonth()+1)).slice(-2)+"/"+t.getFullYear()}function x(e){for(var t=e+"=",a=decodeURIComponent(document.cookie),o=a.split(";"),s=0;s<o.length;s++){var r=o[s];while(" "==r.charAt(0))r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""}function y(e){return e.charAt(0).toUpperCase()+e.slice(1)}var w=function(){function e(){Object(b["a"])(this,e)}return Object(C["a"])(e,null,[{key:"get",value:function(e,t,a){v.a.get(e,a).then((function(e){var a=e.data;switch(a.code){case 200:t.success&&t.success(a);break;case 400:t.failed&&t.failed(a);break;case 403:t.notLoggedIn&&t.notLoggedIn(a);break;case 404:t.empty&&t.empty(a);break;default:t.default&&t.default(a)}})).catch((function(e){t.error&&t.error(e)})).then((function(){t.always&&t.always()}))}},{key:"post",value:function(e,t,a,o){v.a.post(e,t,o).then((function(e){var t=e.data;switch(t.code){case 200:a.success&&a.success(t);break;case 400:a.failed&&a.failed(t);break;case 403:a.notLoggedIn&&a.notLoggedIn(t);break;case 404:a.empty&&a.empty(t);break;default:a.default&&a.default(t)}})).catch((function(e){a.error&&a.error(e)})).then((function(){a.always&&a.always()}))}}]),e}(),I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-overlay",{attrs:{"spinner-variant":"light",variant:"primary",rounded:"sm",show:e.loginLoading,"no-wrap":""}}),a("form",{staticClass:"pt-2",on:{submit:function(t){return t.preventDefault(),e.loginAttempt(t)}}},[a("b-collapse",{attrs:{visible:0==e.userState}},[a("p",{staticClass:"text-danger text-left m-0"},[a("span",[e._v("Completa el campo usuario")])])]),a("b-form-input",{staticClass:"mb-2",attrs:{state:e.userState,type:"text",placeholder:"Usuario"},model:{value:e.user,callback:function(t){e.user=t},expression:"user"}}),a("b-collapse",{attrs:{visible:0==e.passState}},[a("p",{staticClass:"text-danger text-left m-0"},[a("span",[e._v("Completa el campo contraseña")])])]),a("b-form-input",{attrs:{state:e.passState,type:"password",placeholder:"Contraseña"},model:{value:e.pass,callback:function(t){e.pass=t},expression:"pass"}}),a("b-collapse",{staticClass:"mt-2",attrs:{visible:0==e.loginState}},[a("p",{staticClass:"text-danger text-left m-0"},[a("span",[e._v("Usuario y/o contraseña no coinciden")])])]),a("b-button",{staticClass:"mt-4",attrs:{variant:"primary",type:"submit"}},[e._v("Iniciar Sesión")])],1)],1)},P=[],k={data:function(){return{user:"",pass:"",loginData:null,loginState:null,userState:null,passState:null,loginLoading:!1}},methods:{loginAttempt:function(){var e=this;if(this.loginState=null,this.userState=null,this.passState=null,""==this.user&&(this.userState=!1),""==this.pass&&(this.passState=!1),""!=this.user&&""!=this.pass){this.loginLoading=!0;var t={username:this.user,password:this.pass};w.post("/api/login",t,{success:function(t){document.cookie="username=".concat(t.nombre,"; path=/"),document.cookie="organizacion=".concat(t.organizacion.razonSocial,"; path=/"),e.loginSuccess()},empty:function(){e.loginState=!1},error:function(t){e.$bvToast.toast("Ocurrió un error al iniciar sesión",{title:"Error",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,appendToToast:!0})},always:function(){e.loginLoading=!1}})}},loginSuccess:function(){this.$emit("loginSuccess")}}},A=k,S=Object(u["a"])(A,I,P,!1,null,null,null),L=S.exports,$={data:function(){return{sidebar:[{label:"Operaciones",path:"/operaciones"},{label:"Presupuestos",path:"/presupuestos"},{label:"Bandeja de mensajes",path:"/bandeja"}],userData:{organizacion:"",nombre:""},userPanelShow:!1,sidebarShow:!0,breadcrumb:[],reloadPage:!1,routerViewKey:0,loading:!0,debugSparkModalHTML:""}},methods:{updateBreadcrumb:function(){var e=this;if(void 0!=this.$route.meta.breadcrumb){var t=JSON.parse(JSON.stringify(this.$route.meta.breadcrumb));t.forEach((function(t){if("dynamic"==t.type){var a=t.dynamicText,o=e.$route.params[a];void 0!=o&&(t.label=t.label.replace(a,o),t.path=t.path.replace(a,o))}})),this.breadcrumb=t}else this.breadcrumb=[]},logout:function(){document.cookie="username=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.cookie="organizacion=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.cookie="JSESSIONID=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",this.$router.push("/login")},loginSuccess:function(){this.reloadPage&&this.softReloadPage(),this.$bvModal.hide("login-modal")},showLoginModal:function(e){this.reloadPage=e,this.$bvModal.show("login-modal")},softReloadPage:function(){this.routerViewKey?this.routerViewKey++:this.routerViewKey--},createToast:function(e,t,a){this.$bvToast.toast(t,{title:e,variant:a,toaster:"b-toaster-bottom-right",solid:!0,appendToToast:!0})},errorHandling:function(e){if(console.log(e),e.response)switch(e.response.status){case 500:this.$bvModal.show("spark-modal"),this.debugSparkModalHTML=e.response.data;break;default:this.createToast("Error","Ha ocurrido un error, vuelva a intentarlo mas tarde","danger")}else this.createToast("Error","Ha ocurrido un error, vuelva a intentarlo mas tarde","danger")}},watch:{$route:function(e,t){this.updateBreadcrumb()}},mounted:function(){this.updateBreadcrumb(),this.userData.nombre=y(x("username")),this.userData.organizacion=x("organizacion")},provide:function(){return{showLoginModal:this.showLoginModal,errorHandling:this.errorHandling,createToast:this.createToast}},components:{loginForm:L}},E=$,O=(a("1dc2"),Object(u["a"])(E,f,h,!1,null,null,null)),D=O.exports,j=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login-container d-flex w-100 h-100 justify-content-center"},[o("div",{staticClass:"login-centerer h-100 d-flex align-items-center p-3 text-center"},[o("div",[o("img",{staticClass:"mb-4",attrs:{src:a("5ffa"),alt:"",width:"150",height:"150"}}),o("h3",[e._v("Por favor inicia sesión")]),o("loginForm",{on:{loginSuccess:e.loginSuccess}})],1)])])},M=[],T={methods:{loginSuccess:function(){this.$router.push("/")}},components:{loginForm:L}},N=T,F=(a("5ca3"),Object(u["a"])(N,j,M,!1,null,null,null)),H=F.exports,z=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},V=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"p-4"},[a("h1",[e._v("Error 404")]),a("p",[e._v("La pagina que ha intentado acceder no se encuentra")])])}],J={},U=J,B=Object(u["a"])(U,z,V,!1,null,null,null),K=B.exports,G=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},R=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"p-4"},[a("h1",[e._v("Error 500")]),a("p",[e._v("Ha ocurrido un error en el servidor")])])}],Y={},q=Y,Q=Object(u["a"])(q,G,R,!1,null,null,null),W=Q.exports,X=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Z=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid"},[a("h1",{staticClass:"mt-4"},[e._v("Conta Gestión v2020.10.2")]),a("p",[e._v("Seleccione alguna actividad en el menú para iniciar")])])}],ee={},te=ee,ae=Object(u["a"])(te,X,Z,!1,null,null,null),oe=ae.exports,se=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"px-1 px-md-3 px-lg-5 py-4 d-flex justify-content-center"},[o("div",{staticClass:"operaciones-wrapper"},[o("b-nav",{attrs:{tabs:""}},[o("b-nav-item",{attrs:{active:e.egresoOpened(),to:"/operaciones/egreso"}},[e._v("Egresos")]),o("b-nav-item",{attrs:{active:e.ingresoOpened(),to:"/operaciones/ingreso"}},[e._v("Ingresos")])],1),o("transition",{attrs:{name:"fade",mode:"out-in"}},[e.egresoOpened()||e.ingresoOpened()?e._e():o("div",{key:"vacio",staticClass:"border border-top-0 d-flex justify-content-center align-items-center p-2",staticStyle:{height:"300px"}},[o("div",{staticClass:"text-center text-secondary"},[o("b-img",{staticClass:"thinking_emoji",attrs:{src:a("5244")}}),o("p",{staticClass:"pb-4"},[e._v("Seleccione algún tipo de operación")])],1)]),o("router-view")],1)],1)])},re=[],ie={data:function(){return{publicPath:"/"}},methods:{egresoOpened:function(){return"egresos"==this.$route.name||"egreso"==this.$route.name},ingresoOpened:function(){return"ingresos"==this.$route.name}}},ne=ie,ce=(a("2179"),Object(u["a"])(ne,se,re,!1,null,null,null)),le=ce.exports,de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"border border-top-0"},[a("b-overlay",{staticClass:"border-bottom",attrs:{variant:"primary","spinner-variant":"light",show:e.egresosLoading}},[a("b-table",{staticClass:"mb-0 border-0 border-bottom table-row-pointer",attrs:{"show-empty":"","tbody-tr-class":e.rowStyle,"head-variant":"dark",fields:e.campos_egresos,items:e.egresos,"sort-by":"name"},on:{"sort-changed":e.test,"row-clicked":e.toggleEgreso},scopedSlots:e._u([{key:"cell(validado)",fn:function(t){return[t.item.validado?a("b-badge",{attrs:{variant:"success"}},[e._v("Validado")]):a("b-badge",{attrs:{variant:"warning"}},[e._v("Sin Validar")])]}},{key:"cell(valorTotal)",fn:function(t){return[a("span",[e._v(e._s("$"+t.item.valorTotal))])]}},{key:"row-details",fn:function(t){return[a("b-collapse",{attrs:{visible:t.item.showEgreso&&e.egresoLoading}},[a("div",{staticClass:"text-center p-4"},[a("b-spinner",{attrs:{variant:"light",label:"Spinning"}})],1)]),a("b-collapse",{attrs:{visible:t.item.showEgreso&&!e.egresoLoading}},[a("transition",{attrs:{name:"fade"}},[t.item.showEgreso?a("egreso",{key:e.egresoKey,ref:"egreso",attrs:{egresoLoaded:e.egresoLoaded}}):e._e()],1)],1)]}},{key:"empty",fn:function(){return[a("h4",[e._v("No hay egresos para mostrar")])]},proxy:!0}])})],1),a("b-button",{staticClass:"m-2",attrs:{variant:"outline-primary",to:"/operaciones/egreso/agregar"}},[a("b-icon-plus"),e._v(" Agregar Egreso ")],1)],1)},ue=[],ge=(a("d81d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"px-2 pb-2 egreso_container"},[e.egreso?a("b-card",[a("b-overlay",{attrs:{"spinner-variant":"light",variant:"primary",rounded:"sm",show:e.egresoLoading,"no-wrap":""}}),a("div",{staticClass:"row m-0"},[a("div",{staticClass:"col p-0 pr-1"},[a("b-list-group",[a("b-list-group-item",{staticClass:"p-2 text-center",class:{"bg-secondary":e.showDatosProveedor,"text-light":e.showDatosProveedor},attrs:{button:""},on:{click:function(t){e.showDatosProveedor=!e.showDatosProveedor}}},[a("strong",[e._v("Proveedor")]),e._v(" "+e._s(e.egreso.proveedor.nombre))]),a("b-list-group-item",{staticClass:"p-0 overflow-hidden"},[a("b-collapse",{attrs:{visible:e.showDatosProveedor}},[a("b-list-group",{attrs:{flush:""}},[a("b-list-group-item",{staticClass:"p-2"},[a("strong",[e._v("Calle: ")]),e._v(e._s(e.egreso.proveedor.calle))]),a("b-list-group-item",{staticClass:"p-2"},[a("strong",[e._v("Altura: ")]),e._v(e._s(e.egreso.proveedor.altura))]),a("b-list-group-item",{staticClass:"p-2"},[a("strong",[e._v("Piso: ")]),e._v(e._s(e.egreso.proveedor.piso))]),a("b-list-group-item",{staticClass:"p-2"},[a("strong",[e._v("Codigo Postal: ")]),e._v(e._s(e.egreso.proveedor.zipcode))])],1)],1)],1)],1)],1),a("div",{staticClass:"col p-0 pl-1"},[a("b-list-group",[a("b-list-group-item",{staticClass:"p-2 text-center",class:{"bg-secondary":e.showDatosFactura,"text-light":e.showDatosFactura},attrs:{button:""},on:{click:function(t){e.showDatosFactura=!e.showDatosFactura}}},[a("strong",[e._v("Documento")]),e._v(" "+e._s(e.egreso.documento.tipo.nombreTipoDeDocumento))]),a("b-list-group-item",{staticClass:"p-0 overflow-hidden"},[a("b-collapse",{attrs:{visible:e.showDatosFactura}},[a("b-list-group",{attrs:{flush:""}},[a("b-list-group-item",{staticClass:"p-2"},[a("strong",[e._v("Fecha Pedido: ")]),e._v(e._s(e.convertDate(e.egreso.documento.fechaDePedido)))]),a("b-list-group-item",{staticClass:"p-2"},[a("strong",[e._v("Fecha Entrega: ")]),e._v(e._s(e.convertDate(e.egreso.documento.fechaDeEntrega)))]),a("b-list-group-item",{staticClass:"p-2"},[a("strong",[e._v("Descripcion: ")]),e._v(e._s(e.egreso.documento.descripcion))])],1)],1)],1)],1)],1)]),a("div",{staticClass:"row m-0"},[a("div",{staticClass:"col p-0 pt-2"},[a("b-list-group",[a("b-list-group-item",{staticClass:"p-2"},[a("strong",[e._v("Medio de pago: ")]),e._v(e._s(e.egreso.pago.medioDePago.medioDePago)+" "+e._s(e.egreso.pago.codigoAsociado))])],1)],1)]),a("div",{staticClass:"row m-0 pt-2"},[a("div",{staticClass:"col p-0 rounded overflow-hidden border"},[a("b-table",{staticClass:"m-0 border-0",attrs:{borderless:"",foot:"",fields:e.campos_items,items:e.egreso.items},scopedSlots:e._u([{key:"cell(precio)",fn:function(t){return[a("span",[e._v(e._s("$"+t.item.precio))])]}}],null,!1,122665562)})],1)]),e.egreso.ingresoAsociado?a("div",{staticClass:"row m-0 pt-2"},[a("div",{staticClass:"col p-0"},[a("b-list-group",[a("b-list-group-item",{staticClass:"p-2 text-center",class:{"bg-secondary":e.showIngreso,"text-light":e.showIngreso},attrs:{button:""},on:{click:function(t){e.showIngreso=!e.showIngreso}}},[a("strong",[e._v("Ingreso")])]),a("b-list-group-item",{staticClass:"p-0 overflow-hidden"},[a("b-collapse",{attrs:{visible:e.showIngreso}},[a("b-list-group",{attrs:{flush:""}},[a("b-list-group-item",{staticClass:"p-2"},[a("strong",[e._v("Fecha Operacion")]),e._v(" "+e._s(e.convertDate(e.egreso.ingresoAsociado.fechaOperacion)))]),a("b-list-group-item",{staticClass:"p-2"},[a("strong",[e._v("Descripcion")]),e._v(" "+e._s(e.egreso.ingresoAsociado.descripcion))]),a("b-list-group-item",{staticClass:"p-2"},[a("strong",[e._v("Total:")]),e._v(" "+e._s("$"+e.egreso.ingresoAsociado.montoTotal))])],1)],1)],1)],1)],1)]):e._e(),a("div",{staticClass:"row m-0"},[a("div",{staticClass:"col p-0 pt-2"},[a("b-collapse",{attrs:{visible:e.falloCarga}},[a("b-badge",{attrs:{variant:"danger"}},[e._v(e._s(e.falloCargaDetalles))])],1),a("b-button-toolbar",[a("b-button-group",{attrs:{size:"sm"}},[e.egreso.ingresoAsociado?e._e():[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-asociar-ingreso",modifiers:{"modal-asociar-ingreso":!0}}],attrs:{variant:"outline-secondary"}},[e._v("Asociar a Ingreso")])],e.egreso.categorias.length?e._e():[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-asociar-categoria",modifiers:{"modal-asociar-categoria":!0}}],attrs:{variant:"outline-secondary"}},[e._v("Asociar a categorias")])]],2)],1)],1)]),e.egreso.categorias?[e._l(e.egreso.categorias,(function(t,o){return[a("b-badge",{key:o,staticClass:"mr-1"},[e._v(e._s(t.descripcion))])]}))]:e._e()],2):a("div"),a("b-modal",{attrs:{id:"modal-asociar-ingreso","hide-footer":"",scrollable:"",centered:"",title:"Asociar a Ingreso"}},[a("asociar-ingreso",{attrs:{confirmarAccion:e.confirmarAsociarIngreso,cancelarAccion:e.cancelarAsociarIngreso}})],1),a("b-modal",{attrs:{id:"modal-asociar-categoria","hide-footer":"",scrollable:"",centered:"",title:"Asociar a Categoría"}},[a("asociar-categoria",{attrs:{confirmarAccion:e.confirmarAsociarCategorias,cancelarAccion:e.cancelarAsociarCategorias}})],1)],1)}),pe=[],me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-overlay",{attrs:{"spinner-variant":"light",variant:"primary",show:e.categoriasLoading,"no-wrap":""}}),a("p",[e._v("Seleccione categorias para asociar al egreso")]),a("ul",{staticClass:"list-group"},e._l(e.criterios,(function(t,o){return a("criterio",{key:o,attrs:{criterio:t,"selecciono-categoria":e.seleccionoCategoria}})})),1),e.categoriasSeleccionadas.length?a("div",{staticClass:"pt-2"},[a("span",[e._v("Categorias seleccionadas: ")]),e._l(e.categoriasSeleccionadas,(function(t,o){return[a("b-badge",{key:o,staticClass:"mr-1"},[e._v(e._s(t.name))])]}))],2):e._e(),a("div",{staticClass:"row pt-4"},[a("div",{staticClass:"col d-flex justify-content-between"},[a("b-button-group",[a("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.confirmarAccion(e.categoriasSeleccionadas)}}},[e._v("Confirmar")]),a("b-button",{attrs:{variant:"outline-dark"},on:{click:e.cancelarAccion}},[e._v("Cancelar")])],1)],1)])],1)},ve=[],fe=(a("a434"),a("d3b7"),a("25f0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{staticClass:"list-group-item p-0"},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:e.criterio.id,expression:"(criterio.id)"}],staticClass:"text-left p-2 criterio-toggle",attrs:{block:"",variant:"outline"}},[a("b-icon-caret-right-fill",{attrs:{scale:"0.5"}}),e._v(" "+e._s(e.criterio.name)+" ")],1),a("b-collapse",{attrs:{id:e.criterio.id}},[e._l(e.criterio.categorias,(function(t,o){return[a("b-form-checkbox",{key:o,staticClass:"py-2 ml-2",on:{input:function(a){return e.seleccionoCategoria({id:t.id,name:t.name},a)}}},[e._v(e._s(t.name))])]})),e.criterio.criterios.length?a("ul",{staticClass:"list-group p-2"},e._l(e.criterio.criterios,(function(t,o){return a("criterio",{key:o,attrs:{criterio:t,"selecciono-categoria":e.seleccionoCategoria}})})),1):e._e()],2)],1)}),he=[],be={name:"criterio",props:{criterio:Object,seleccionoCategoria:Function},data:function(){return{isOpen:!1}}},Ce=be,_e=(a("35fb"),Object(u["a"])(Ce,fe,he,!1,null,null,null)),xe=_e.exports,ye={props:{confirmarAccion:Function,cancelarAccion:Function},data:function(){return{criterios:[],criteriosAPI:[],categoriasSeleccionadas:[],categoriasLoading:!1}},inject:["showLoginModal","errorHandling"],methods:{cargarCriteriosAPI:function(){var e=this;this.categoriasLoading=!0,w.get("/api/categorias",{success:function(t){e.criteriosAPI=t.criterios,e.procesarCriterios()},notLoggedIn:function(){e.showLoginModal(!0)},error:function(t){console.log(e),e.errorHandling(t)},always:function(){e.categoriasLoading=!1}})},procesarCriterios:function(){var e=this;this.criteriosAPI.forEach((function(t){if(t.categorias||(t.categorias=[]),t.criterios||(t.criterios=[]),t.id=t.id.toString(),t.idCriterioPadre){var a=e.criterioPorId(t.idCriterioPadre);a.criterios||(a.criterios=[]),a.criterios.push(t)}}));var t=[],a=0;for(a=0;a<this.criteriosAPI.length;a++){var o=this.criteriosAPI[a];o.idCriterioPadre&&t.push(a)}for(a=t.length-1;a>=0;a--)this.criteriosAPI.splice(t[a],1);this.criterios=this.criteriosAPI},criterioPorId:function(e){var t=null;return this.criteriosAPI.forEach((function(a){a.id==e&&(t=a)})),t},seleccionoCategoria:function(e,t){if(t)this.categoriasSeleccionadas.push(e);else{var a=this.categoriasSeleccionadas.indexOf(e);this.categoriasSeleccionadas.splice(a,1)}}},mounted:function(){this.cargarCriteriosAPI()},components:{criterio:xe}},we=ye,Ie=Object(u["a"])(we,me,ve,!1,null,null,null),Pe=Ie.exports,ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[e._v("Seleccione el Ingreso para asociar a este Egreso")]),a("b-input-group",{staticClass:"my-2",staticStyle:{"flex-wrap":"nowrap"}},[a("b-input-group-prepend",[a("b-button",{staticClass:"border-secondary",attrs:{variant:"outline"}},[a("b-icon-search")],1)],1),a("b-form-input",{staticClass:"border-secondary",attrs:{placeholder:"Buscar Ingreso"}})],1),a("b-overlay",{attrs:{"spinner-variant":"primary",show:e.ingresosLoading,rounded:"sm"}},[a("b-form-select",{staticClass:"border-secondary",attrs:{options:e.ingresosSelect},scopedSlots:e._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null,disabled:""}},[e._v("-- Selecciona un Ingreso --")])]},proxy:!0}]),model:{value:e.ingresoSelected,callback:function(t){e.ingresoSelected=t},expression:"ingresoSelected"}})],1),a("b-button-group",{staticClass:"mt-5"},[a("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.confirmarAccion(e.ingresoSelected)}}},[e._v("Confirmar")]),a("b-button",{attrs:{variant:"outline-dark"},on:{click:e.cancelarAccion}},[e._v("Cancelar")])],1)],1)},Ae=[],Se={props:{confirmarAccion:Function,cancelarAccion:Function},data:function(){return{ingresosSelect:[],ingresoSelected:null,ingresosLoading:!1}},inject:["showLoginModal","errorHandling"],methods:{cargarIngresosAPI:function(){var e=this;this.ingresosLoading=!0,w.get("/api/operaciones/ingresos",{success:function(t){e.ingresosSelect=t.ingresos.map(e.ingresosAPIConverter)},notLoggedIn:function(){e.showLoginModal(!0)},error:function(t){e.errorHandling(t)},always:function(){e.ingresosLoading=!1}})},ingresosAPIConverter:function(e){return{value:{id:e.id,montoTotal:e.montoTotal,descripcion:e.descripcion},text:e.descripcion+" - $"+e.montoTotal}}},mounted:function(){this.cargarIngresosAPI()}},Le=Se,$e=Object(u["a"])(Le,ke,Ae,!1,null,null,null),Ee=$e.exports,Oe={props:{egresoLoaded:Function},template:"{{> egreso/egresoHTML.hbs}}",data:function(){return{egreso:null,ingresos:[],showDatosProveedor:!1,showDatosFactura:!1,showIngreso:!1,showPresupuesto:!1,campos_items:[{key:"tipo",label:"Tipo",tdClass:[],thClass:[]},{key:"descripcion",label:"Descripcion",tdClass:["w-100"],thClass:[]},{key:"cantidad",label:"Cantidad",tdClass:["text-center"],thClass:["text-center"]},{key:"precio",label:"Precio",tdClass:[],thClass:[]}],egresoLoading:!1,falloCarga:!1,falloCargaDetalles:""}},inject:["showLoginModal","errorHandling"],methods:{convertDate:_,cargarEgresoAPI:function(){var e=this,t=this.$route.params.id;void 0!=t&&w.get("/api/operaciones/egreso/".concat(t),{success:function(t){e.egreso=t.egreso,e.egreso.items=t.egreso.items.map(e.itemEgresoAPIConverter)},notLoggedIn:function(){e.showLoginModal(!0)},error:function(t){e.errorHandling(t)},always:function(){e.egresoLoaded()}})},itemEgresoAPIConverter:function(e){return{tipo:e.tipo.id,descripcion:e.tipo.nombre,cantidad:e.cantidad,precio:e.precio}},confirmarAsociarIngreso:function(e){var t=this;this.falloCarga=!1,this.$bvModal.hide("modal-asociar-ingreso"),console.log(e);var a=e;if(a){this.egresoLoading=!0;var o={egresoId:this.egreso.id,ingresoId:a.id};console.log("POST '/api/operaciones/asociarManualmente'"),console.log(JSON.stringify(o,null,4)),w.post("/api/operaciones/asociarManualmente",o,{success:function(e){t.cargarEgresoAPI()},notLoggedIn:function(){t.showLoginModal(!0)},failed:function(e){t.falloCarga=!0,t.falloCargaDetalles=e.message},error:function(e){t.falloCarga=!0,t.errorHandling(e)},always:function(){t.egresoLoading=!1}})}},cancelarAsociarIngreso:function(){this.$bvModal.hide("modal-asociar-ingreso")},confirmarAsociarCategorias:function(e){var t=this;this.falloCarga=!1,this.$bvModal.hide("modal-asociar-categoria"),console.log(e);var a=e;if(a){this.egresoLoading=!0;var o={id:this.egreso.id,categorias:a.map((function(e){return e.id}))};console.log("POST '/api/categorias/asociar'"),console.log(JSON.stringify(o,null,4)),w.post("/api/categorias/asociar",o,{success:function(e){t.cargarEgresoAPI()},notLoggedIn:function(){t.showLoginModal(!0)},failed:function(e){t.falloCarga=!0,t.falloAsociacionDetalles=e.message},error:function(e){t.falloCarga=!0,t.errorHandling(e)},always:function(){t.egresoLoading=!1}})}},cancelarAsociarCategorias:function(){this.$bvModal.hide("modal-asociar-categoria")}},mounted:function(){this.cargarEgresoAPI()},components:{"asociar-ingreso":Ee,"asociar-categoria":Pe}},De=Oe,je=(a("eea0"),Object(u["a"])(De,ge,pe,!1,null,null,null)),Me=je.exports,Te={data:function(){return{egresos:[],egresoLoading:!0,egresosLoading:!1,egresoSelected:null,egresoKey:0,ingresosLoading:!1,campos_egresos:[{key:"name",label:"Egreso",thClass:["w-100"],tdClass:[],sortable:!0},{key:"validado",label:"Estado",thClass:["text-center"],tdClass:["text-center"],sortable:!0},{key:"valorTotal",label:"Total",thClass:["text-center"],tdClass:["text-center"],sortable:!0},{key:"fechaOperacion",label:"Emitido",thClass:["text-center"],tdClass:["text-center"],sortable:!0}]}},inject:["showLoginModal","errorHandling"],methods:{test:function(e){this.seleccionarEgreso(),this.egresoKey=!this.egresoKey},cargarEgresosAPI:function(){var e=this;this.egresosLoading=!0,w.get("/api/operaciones/egresos",{success:function(t){e.egresos=t.egresos.map(e.egresosAPIConverter)},notLoggedIn:function(){e.showLoginModal(!0)},error:function(t){e.errorHandling(t)},always:function(){e.egresosLoading=!1}})},egresosAPIConverter:function(e){return{id:e.id,name:"Egreso "+e.id,validado:e.validado,valorTotal:e.montoTotal,fechaOperacion:_(e.fechaOperacion),_showDetails:!0,showEgreso:!1}},toggleEgreso:function(e){e.showEgreso?this.$router.push("/operaciones/egreso"):this.$router.push("/operaciones/egreso/"+e.id)},seleccionarEgreso:function(){var e=this.$route.params.id;this.egresoLoading=!0,this.egresos.forEach((function(t){t.id!=e?t.showEgreso=!1:t.showEgreso=!0}))},egresoLoaded:function(){this.egresoLoading=!1},egresoOpened:function(){return"egresos"==this.$route.name||"egreso"==this.$route.name},rowStyle:function(e,t){return"row"==t&&e.showEgreso?["bg-secondary","text-light"]:"row-details"==t?["bg-secondary"]:void 0}},components:{egreso:Me},watch:{$route:function(e,t){"egresos"==this.$route.name&&this.cargarEgresosAPI(),this.seleccionarEgreso()},egresosLoading:function(e,t){0==e&&this.seleccionarEgreso()}},mounted:function(){this.cargarEgresosAPI(),this.seleccionarEgreso()}},Ne=Te,Fe=(a("1d92"),Object(u["a"])(Ne,de,ue,!1,null,null,null)),He=Fe.exports,ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"border border-top-0"},[a("b-overlay",{staticClass:"border-bottom",attrs:{variant:"primary","spinner-variant":"light",show:e.ingresosLoading}},[a("b-table",{staticClass:"mb-0 border-0 border-bottom",attrs:{"show-empty":"","head-variant":"dark","sort-by":"name",fields:e.campos_ingresos,items:e.ingresos},scopedSlots:e._u([{key:"cell(descripcion)",fn:function(t){return[a("b-collapse",{attrs:{id:"ingreso-descripcion"+t.index,visible:!0}},[a("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"ingreso-descripcion"+t.index,expression:"'ingreso-descripcion'+data.index"}],staticClass:"text-nowrap text-truncate"},[e._v(e._s(t.item.descripcion))])]),a("b-collapse",{attrs:{id:"ingreso-descripcion"+t.index}},[a("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"ingreso-descripcion"+t.index,expression:"'ingreso-descripcion'+data.index"}],staticStyle:{"overflow-wrap":"break-word"}},[e._v(e._s(t.item.descripcion))])])]}},{key:"cell(montoTotal)",fn:function(t){return[a("span",[e._v(e._s("$"+t.item.montoTotal))])]}},{key:"empty",fn:function(){return[a("h4",[e._v("No hay ingresos para mostrar")])]},proxy:!0}])}),a("b-button",{staticClass:"m-2",attrs:{variant:"outline-primary",to:"/operaciones/ingreso/agregar"}},[a("b-icon-plus"),e._v(" Agregar Ingreso ")],1)],1)],1)},Ve=[],Je={data:function(){return{ingresos:[],ingresosLoading:!1,campos_ingresos:[{key:"name",label:"Ingreso",thClass:["w-25"],tdClass:[],sortable:!0},{key:"descripcion",label:"Descripcion",thClass:["w-50"],tdClass:["mw-0"]},{key:"montoTotal",label:"Total",thClass:["text-center"],tdClass:["text-center"],sortable:!0},{key:"fechaOperacion",label:"Fecha Operación",thClass:["text-center","w-25"],tdClass:["text-center"],sortable:!0}]}},inject:["showLoginModal","errorHandling"],methods:{cargarIngresosAPI:function(){var e=this;this.ingresosLoading=!0,w.get("/api/operaciones/ingresos",{success:function(t){e.ingresos=t.ingresos.map(e.ingresosAPIConverter)},notLoggedIn:function(){e.showLoginModal(!0)},error:function(t){e.errorHandling(t)},always:function(){e.ingresosLoading=!1}})},ingresosAPIConverter:function(e){return{id:e.id,name:"Ingreso "+e.id,descripcion:e.descripcion,montoTotal:e.montoTotal,fechaOperacion:_(e.fechaOperacion),_showDetails:!0,showEgreso:!1}}},mounted:function(){this.cargarIngresosAPI()}},Ue=Je,Be=Object(u["a"])(Ue,ze,Ve,!1,null,null,null),Ke=Be.exports,Ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-overlay",{staticClass:"container-fluid h-100",attrs:{"spinner-variant":"light",variant:"primary",show:e.loading},scopedSlots:e._u([{key:"overlay",fn:function(){return[a("div",{staticClass:"d-flex align-items-center"},[a("b-spinner",{staticClass:"flex-shrink-0",attrs:{variant:"light"}}),a("span",{staticClass:"text-light ml-4"},[e._v("Cargando mensajes...")])],1)]},proxy:!0}])},[a("div",{staticClass:"row h-100"},[a("div",{staticClass:"col-5 col-lg-4 col-xl-3 h-100 border-right p-0"},[a("div",{staticClass:"w-100 h-100 d-flex flex-column"},[a("div",{staticClass:"flex-shrink-0 border-bottom"},[a("div",{staticClass:"d-flex align-items-center p-1"},[a("div",{staticClass:"w-100 pl-3 text-truncate"},[e._v(e._s(e.mensajesFiltradosOrdenados.length)+" Mensajes Filtrados")]),a("b-button-group",[a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}},{name:"b-toggle",rawName:"v-b-toggle.filter-sort",modifiers:{"filter-sort":!0}}],attrs:{squared:"",variant:"outline",title:"Filtrar y Ordenar mensajes"}},[a("b-icon-sort-down")],1)],1)],1),a("b-collapse",{attrs:{id:"filter-sort"}},[a("div",{staticClass:"border-top p-3",staticStyle:{"background-color":"#eee"}},[a("b-form-group",{attrs:{label:"Ordenar por"}},[a("b-form-select",{model:{value:e.ordenar,callback:function(t){e.ordenar=t},expression:"ordenar"}},[a("b-form-select-option",{attrs:{value:null,selected:""}},[e._v("Sin ordenar")]),a("b-form-select-option",{attrs:{value:"fecha"}},[e._v("Fecha")])],1)],1),a("b-form-group",{staticClass:"m-0",attrs:{label:"Filtrar por"}},[a("b-form-radio",{attrs:{value:null},model:{value:e.filtrar,callback:function(t){e.filtrar=t},expression:"filtrar"}},[e._v("Ambos")]),a("b-form-radio",{attrs:{value:"leidos"},model:{value:e.filtrar,callback:function(t){e.filtrar=t},expression:"filtrar"}},[e._v("Leidos")]),a("b-form-radio",{attrs:{value:"no leidos"},model:{value:e.filtrar,callback:function(t){e.filtrar=t},expression:"filtrar"}},[e._v("No Leidos")])],1)],1)])],1),e.mensajesFiltradosOrdenados.length?a("b-list-group",{staticClass:"overflow-auto h-100 p-0",attrs:{flush:""}},e._l(e.mensajesFiltradosOrdenados,(function(t){return a("b-list-group-item",{key:t.id,staticClass:"d-flex justify-content-between align-items-center",attrs:{to:"/bandeja/"+t.id,active:t.id==e.selected}},[a("span",{staticClass:"d-inline-block text-truncate"},[e._v(e._s(t.cuerpo))]),t.leido?e._e():a("b-badge",{staticClass:"ml-1 mr-1",attrs:{pill:"",variant:"success"}},[e._v("nuevo")]),a("b-badge",{attrs:{pill:"",variant:"light"}},[e._v(e._s(e.convertDate(t.fechaCreacion)))])],1)})),1):a("div",{staticClass:"d-flex h-100 justify-content-center align-items-center"},[a("div",{staticClass:"text-secondary text-center"},[a("h1",[a("b-icon-emoji-sunglasses")],1),a("p",[e._v("La bandeja de mensajes esta vacía")])])])],1)]),a("div",{staticClass:"col overflow-auto h-100 p-0"},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[e.getMessageSelected()?a("div",{key:e.selected,staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"d-flex bg-primary justify-content-between align-items-center col-12 p-3"},[a("h4",{staticClass:"text-light m-0"},[e._v("Mensaje "+e._s(e.getMessageSelected().id))]),a("b-badge",{attrs:{pill:"",variant:"primary"}},[e._v(e._s(e.convertDate(e.getMessageSelected().fechaCreacion)))])],1),a("div",{staticClass:"col p-3 text-justify"},[e._v(" "+e._s(e.getMessageSelected().cuerpo)+" ")])])]):a("div",{staticClass:"d-flex h-100 justify-content-center align-items-center"},[a("div",{staticClass:"text-secondary text-center"},[a("p",[e._v("Seleccione algún mensaje para verlo aquí")])])])])],1)])])},Re=[],Ye=(a("4de4"),{data:function(){return{mensajes:[],mensajesFiltradosOrdenados:[],selected:null,loading:!0,ordenar:null,filtrar:null}},inject:["errorHandling","showLoginModal"],methods:{convertDate:_,seleccionarMensaje:function(){var e=this.$route.params.id;this.selected=e,this.marcarVistoAPI()},marcarVistoAPI:function(){var e=this;if(null!=this.getMessageSelected()){this.getMessageSelected().leido=!0;var t={id:this.getMessageSelected().id};w.post("/api/bandeja/visto",t,{notLoggedIn:function(){e.showLoginModal(!0)},error:function(t){e.errorHandling(t)}})}},cargarMensajesAPI:function(){var e=this;this.loading=!0,w.get("/api/bandeja",{success:function(t){e.mensajes=t.mensajes,e.ordenarFiltrarMensajes()},notLoggedIn:function(){e.showLoginModal(!0)},empty:function(){e.mensajes=[]},error:function(t){e.errorHandling(t)},always:function(){e.loading=!1}})},getMessageSelected:function(){for(var e=null,t=0;t<this.mensajes.length;t++)this.mensajes[t].id==this.selected&&(e=this.mensajes[t]);return e},ordenarPorFecha:function(e,t){return e.fechaCreacion>t.fechaCreacion?-1:e.fechaCreacion<t.fechaCreacion?1:0},ordenarPorNoLeidos:function(e,t){return e.leido<t.leido?-1:e.leido>t.leido?1:0},ordenarPorId:function(e,t){return e.id<t.id?-1:e.id>t.id?1:0},filtrarSoloLeidos:function(e){return e.leido},filtrarSoloNoLeidos:function(e){return!e.leido},ordenarFiltrarMensajes:function(){var e=function(){return 1},t=this.ordenarPorId;switch(this.filtrar){case"leidos":e=this.filtrarSoloLeidos;break;case"no leidos":e=this.filtrarSoloNoLeidos;break}switch(this.ordenar){case"fecha":t=this.ordenarPorFecha;break;case"no leidos":t=this.ordenarPorNoLeidos;break}var a=this.mensajes.filter(e),o=a.sort(t);this.mensajesFiltradosOrdenados=o}},watch:{$route:function(e,t){this.seleccionarMensaje()},ordenar:function(){this.ordenarFiltrarMensajes()},filtrar:function(){this.ordenarFiltrarMensajes()}},mounted:function(){this.cargarMensajesAPI(),this.seleccionarMensaje()}}),qe=Ye,Qe=Object(u["a"])(qe,Ge,Re,!1,null,null,null),We=Qe.exports,Xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"p-4 d-flex justify-content-center",staticStyle:{background:"#eee"}},[a("div",{staticClass:"w-100",staticStyle:{"max-width":"768px"}},[a("b-card",{staticClass:"mb-4",attrs:{title:"Datos personales"}},[a("div",{staticClass:"mt-2"},[e._v("Nombre")]),a("b-form-input",{attrs:{value:"Javier",readonly:""}}),a("div",{staticClass:"mt-2"},[e._v("Email")]),a("b-form-input",{attrs:{value:"javiersito@gmail.com",readonly:""}})],1),a("b-card",{staticClass:"mb-4",attrs:{title:"Datos de organizacion"}},[a("div",{staticClass:"mt-2"},[e._v("Razon social")]),a("b-form-input",{attrs:{value:"Entidad Juridica",readonly:""}}),a("div",{staticClass:"mt-2"},[e._v("CUIT")]),a("b-form-input",{attrs:{value:"1234",readonly:""}}),a("div",{staticClass:"mt-2"},[e._v("Nombre Ficticio")]),a("b-form-input",{attrs:{value:"Organizacion",readonly:""}})],1),a("b-card",{attrs:{title:"Cambiar contraseña"}},[a("div",{staticClass:"mt-2"},[e._v("Contraseña actual")]),a("b-form-input",{attrs:{type:"password",placeholder:"Ingrese su contraseña"}}),a("div",{staticClass:"mt-2"},[e._v("Nueva contraseña")]),a("b-form-input",{attrs:{type:"password",placeholder:"Ingrese nueva contraseña"}}),a("div",{staticClass:"mt-2"},[e._v("Repita la nueva contraseña")]),a("b-form-input",{attrs:{type:"password",placeholder:"Repita contraseña"}}),a("div",{staticClass:"mt-2"},[a("b-button",{attrs:{variant:"primary"}},[e._v("Confirmar")])],1)],1)],1)])},Ze=[],et={},tt=et,at=Object(u["a"])(tt,Xe,Ze,!1,null,null,null),ot=at.exports,st=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row h-100 m-0"},[a("b-list-group",{staticClass:"col-4 overflow-auto h-100 p-0 border-right",staticStyle:{"max-width":"300px"},attrs:{flush:""}},[e._l(e.items,(function(t,o){return[a("b-list-group-item",{key:o,staticClass:"d-flex justify-content-between align-items-center",attrs:{to:t.to,active:e.$route.name==t.routeName}},[e._v(e._s(t.text))])]}))],2),a("div",{staticClass:"col overflow-auto h-100 p-0",staticStyle:{"background-color":"#eee"}},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)],1)],1)},rt=[],it={data:function(){return{items:[{text:"Usuarios",routeName:"configUsuarios",to:"/panel/usuarios"},{text:"Criterios",routeName:"configCriterios",to:"/panel/criterios"},{text:"Vinculacion de Operaciones",routeName:"configVinculacion",to:"/panel/vinculacion"},{text:"Validacion de Egresos",routeName:"configValidacion",to:"/panel/validaciones"}]}}},nt=it,ct=Object(u["a"])(nt,st,rt,!1,null,null,null),lt=ct.exports,dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-overlay",{staticClass:"w-100 h-100",attrs:{"spinner-variant":"light",variant:"primary",show:e.loading}},[a("div",{staticClass:"text-center p-2"},[a("div",[a("p",{staticClass:"mt-4 mb-2"},[e._v("Días en los que se ejecutará la validación de egresos")]),a("div",{staticClass:"d-flex justify-content-center"},[e._l(e.diasOptions,(function(t,o){return[a("b-button",{key:o,staticClass:"mr-1 p-0 rounded-circle text-center",staticStyle:{width:"40px",height:"40px"},attrs:{variant:e.diaIsSelected(t.value)?"primary":"outline-secondary"},on:{click:function(a){return e.toggleDia(t.value)}}},[e._v(e._s(t.text))])]}))],2),a("p",{staticClass:"mt-4 mb-2"},[e._v("Horario de inicio")]),a("div",{staticClass:"d-flex justify-content-center mb-5"},[a("div",{staticClass:"d-flex p-2 align-items-center"},[a("b-button-group",{attrs:{vertical:""}},[a("b-button",{on:{click:function(t){e.scheduler.horaInicio++}}},[a("b-icon-chevron-compact-up")],1),a("b-form-input",{staticClass:"bg-secondary text-light border-0 rounded-0 text-center",staticStyle:{"font-size":"2rem",width:"70px"},attrs:{lazy:""},model:{value:e.scheduler.horaInicio,callback:function(t){e.$set(e.scheduler,"horaInicio",t)},expression:"scheduler.horaInicio"}}),a("b-button",{on:{click:function(t){e.scheduler.horaInicio--}}},[a("b-icon-chevron-compact-down")],1)],1),a("div",{staticClass:"p-2"},[a("b-icon-dot",{staticClass:"d-block"}),a("b-icon-dot",{staticClass:"d-block"})],1),a("b-button-group",{attrs:{vertical:""}},[a("b-button",{on:{click:function(t){e.scheduler.minutoInicio++}}},[a("b-icon-chevron-compact-up")],1),a("b-form-input",{staticClass:"bg-secondary text-light border-0 rounded-0 text-center",staticStyle:{"font-size":"2rem",width:"70px"},attrs:{lazy:""},model:{value:e.scheduler.minutoInicio,callback:function(t){e.$set(e.scheduler,"minutoInicio",t)},expression:"scheduler.minutoInicio"}}),a("b-button",{on:{click:function(t){e.scheduler.minutoInicio--}}},[a("b-icon-chevron-compact-down")],1)],1)],1)])]),a("div",{staticClass:"d-flex justify-content-center"},[a("b-button",{attrs:{variant:"primary"},on:{click:e.guardarConfiguracionAPI}},[e._v("Guardar Configuración")])],1)])])},ut=[],gt={data:function(){return{scheduler:{horaInicio:0,minutoInicio:0,dias:[]},diasOptions:[{value:1,text:"Lu"},{value:2,text:"Ma"},{value:3,text:"Mi"},{value:4,text:"Ju"},{value:5,text:"Vi"},{value:6,text:"Sa"},{value:7,text:"Do"}],loading:!1}},inject:["showLoginModal","errorHandling","createToast"],methods:{cargarConfiguracionAPI:function(){var e=this;this.loading=!0,v.a.get("/api/bandeja/configuracion").then((function(t){var a=t.data;200==a.code?(e.scheduler=a.schedulerInit,e.updateHoraYMinuto()):403==a.code&&e.showLoginModal(!0)})).catch((function(t){e.errorHandling(t)})).then((function(){e.loading=!1}))},guardarConfiguracionAPI:function(){var e=this;this.loading=!0,v.a.post("/api/bandeja/configurar",this.scheduler).then((function(t){var a=t.data;200==a.code?(e.createToast("Guardado exitoso","Se guardo la configuración correctamente","success"),e.updateHoraYMinuto()):403==a.code&&e.showLoginModal(!1)})).catch((function(t){e.errorHandling(t)})).then((function(){e.loading=!1}))},toggleDia:function(e){this.diaIsSelected(e)?this.scheduler.dias.splice(this.getDiaIndex(e),1):this.scheduler.dias.push(e)},diaIsSelected:function(e){return-1!=this.getDiaIndex(e)},getDiaIndex:function(e){return this.scheduler.dias.indexOf(e)},updateHoraYMinuto:function(){this.scheduler.horaInicio=("0"+this.scheduler.horaInicio).slice(-2),this.scheduler.minutoInicio=("0"+this.scheduler.minutoInicio).slice(-2)},formatHora:function(e){isNaN(e)&&(this.scheduler.horaInicio=0),e>23?this.scheduler.horaInicio=0:e<0&&(this.scheduler.horaInicio=23)},formatMinuto:function(e){isNaN(e)&&(this.scheduler.minutoInicio=0),e>59?(this.scheduler.minutoInicio=0,this.scheduler.horaInicio++):e<0&&(this.scheduler.minutoInicio=59,this.scheduler.horaInicio--)}},mounted:function(){this.cargarConfiguracionAPI()},watch:{"scheduler.horaInicio":function(e){this.formatHora(e),this.updateHoraYMinuto()},"scheduler.minutoInicio":function(e){this.formatMinuto(e),this.updateHoraYMinuto()}}},pt=gt,mt=Object(u["a"])(pt,dt,ut,!1,null,null,null),vt=mt.exports,ft=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pt-3"},[a("b-overlay",{attrs:{"spinner-variant":"light",variant:"primary",show:e.egresoLoading&&!e.falloCarga,"no-wrap":""},scopedSlots:e._u([{key:"overlay",fn:function(){return[a("div",[a("div",{staticClass:"d-flex justify-content-center"},[a("b-spinner",{staticClass:"flex-shrink-0",attrs:{variant:"light"}})],1),e.egreso.archivo?a("div",{staticClass:"mt-4"},[a("p",{staticClass:"text-light"},[e._v("Subiendo archivo")]),a("b-progress",{staticClass:"progress-min-width bg-transparent",attrs:{variant:"light",max:"100",height:"2rem"}},[a("b-progress-bar",{attrs:{value:e.archivoProgress}},[a("strong",{staticClass:"text-secondary"},[e._v(e._s(e.archivoProgress)+"%")])])],1)],1):e._e()])]},proxy:!0}])}),e._m(0),a("div",{staticClass:"row mb-4 mx-2"},[e._m(1),a("div",{staticClass:"col bg-light p-2"},[a("span",{staticClass:"ml-2"},[e._v(e._s(e.getCookie("organizacion")))])]),a("div",{staticClass:"col-lg-1 col-xl-3"})]),a("div",{staticClass:"row mb-4 mx-2"},[e._m(2),a("div",{staticClass:"col"},[a("b-collapse",{attrs:{visible:!e.egreso.fechaOperacion&&e.falloInput}},[a("b-badge",{attrs:{variant:"danger"}},[e._v("Ingrese la fecha de la operacion")])],1),a("b-form-datepicker",{staticClass:"mb-2",attrs:{placeholder:"Seleccione fecha de la Operación",state:!(!e.egreso.fechaOperacion&&e.falloInput)&&null},model:{value:e.egreso.fechaOperacion,callback:function(t){e.$set(e.egreso,"fechaOperacion",t)},expression:"egreso.fechaOperacion"}})],1),a("div",{staticClass:"col-lg-1 col-xl-3"})]),a("div",{staticClass:"row mb-4 mx-2 justify-content-between"},[e._m(3),a("div",{staticClass:"col d-flex align-items-end"},[a("div",{staticClass:"w-100"},[a("b-collapse",{attrs:{visible:!e.egreso.proveedor&&e.falloInput}},[a("b-badge",{attrs:{variant:"danger"}},[e._v("Seleccione un proveedor")])],1),a("b-overlay",{attrs:{"spinner-variant":"primary",show:e.proveedoresLoading,rounded:"sm"}},[a("b-form-select",{attrs:{options:e.proveedoresSelect,state:!(!e.egreso.proveedor&&e.falloInput)&&null},scopedSlots:e._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null,disabled:""}},[e._v("-- Selecciona un Proveedor --")])]},proxy:!0}]),model:{value:e.egreso.proveedor,callback:function(t){e.$set(e.egreso,"proveedor",t)},expression:"egreso.proveedor"}},[[null!=e.proveedorAAgregar?a("b-form-select-option",{staticClass:"text-primary",attrs:{value:"nuevoProveedor"}},[e._v(e._s(e.proveedorAAgregar.nombre)+" (nuevo)")]):e._e()]],2)],1)],1)]),a("div",{staticClass:"col d-flex align-items-end"},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-agregar-proveedor",modifiers:{"modal-agregar-proveedor":!0}}],attrs:{block:"",variant:"outline-primary"}},[a("b-icon-plus"),e._v(" Cargar Proveedor ")],1)],1),a("div",{staticClass:"col-lg-1 col-xl-3"})]),a("div",{staticClass:"row mb-4 mx-2 justify-content-between"},[e._m(4),a("div",{staticClass:"col d-flex align-items-end"},[a("div",{staticClass:"w-100"},[a("b-collapse",{attrs:{visible:!e.egreso.medioDePago.id&&e.falloInput}},[a("b-badge",{attrs:{variant:"danger"}},[e._v("Seleccione un medio de pago")])],1),a("b-overlay",{attrs:{"spinner-variant":"primary",show:e.mediosDePagoLoading,rounded:"sm"}},[a("b-form-select",{attrs:{options:e.mediosDePagoSelect,state:!(!e.egreso.medioDePago.id&&e.falloInput)&&null},scopedSlots:e._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null,disabled:""}},[e._v("-- Seleccionar un Medio de Pago --")])]},proxy:!0}]),model:{value:e.egreso.medioDePago.id,callback:function(t){e.$set(e.egreso.medioDePago,"id",t)},expression:"egreso.medioDePago.id"}})],1)],1)]),a("div",{staticClass:"col d-flex align-items-end"},[a("div",{staticClass:"w-100"},[a("b-collapse",{attrs:{visible:!e.egreso.medioDePago.dato&&e.falloInput}},[a("b-badge",{attrs:{variant:"danger"}},[e._v("Ingrese el número de pago")])],1),a("b-form-input",{attrs:{placeholder:"Ingrese número de pago",state:!(!e.egreso.medioDePago.dato&&e.falloInput)&&null},model:{value:e.egreso.medioDePago.dato,callback:function(t){e.$set(e.egreso.medioDePago,"dato",t)},expression:"egreso.medioDePago.dato"}})],1)]),a("div",{staticClass:"col-lg-1 col-xl-3"})]),a("div",{staticClass:"row mb-4 mx-2"},[e._m(5),a("div",{staticClass:"col"},[a("div",{staticClass:"p-2 container-fluid border border rounded"},[a("div",{staticClass:"row mb-2"},[e._m(6),a("div",{staticClass:"col"},[a("b-collapse",{attrs:{visible:!e.egreso.documentoComercial.tipo&&e.falloInput}},[a("b-badge",{attrs:{variant:"danger"}},[e._v("Seleccione un tipo de documento")])],1),a("b-form-select",{attrs:{options:e.tipoDocumentoSelect,state:!(!e.egreso.documentoComercial.tipo&&e.falloInput)&&null},scopedSlots:e._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null,disabled:""}},[e._v("-- Seleccionar un Tipo de Documento --")])]},proxy:!0}]),model:{value:e.egreso.documentoComercial.tipo,callback:function(t){e.$set(e.egreso.documentoComercial,"tipo",t)},expression:"egreso.documentoComercial.tipo"}})],1)]),a("div",{staticClass:"row mb-2"},[e._m(7),a("div",{staticClass:"col"},[a("b-collapse",{attrs:{visible:!e.egreso.documentoComercial.numeroDocumento&&e.falloInput}},[a("b-badge",{attrs:{variant:"danger"}},[e._v("Ingrese el número de documento")])],1),a("b-form-input",{attrs:{placeholder:"Ingrese número de documento",state:!(!e.egreso.documentoComercial.numeroDocumento&&e.falloInput)&&null},model:{value:e.egreso.documentoComercial.numeroDocumento,callback:function(t){e.$set(e.egreso.documentoComercial,"numeroDocumento",t)},expression:"egreso.documentoComercial.numeroDocumento"}})],1)]),a("div",{staticClass:"row mb-2"},[e._m(8),a("div",{staticClass:"col"},[a("b-collapse",{attrs:{visible:!e.egreso.documentoComercial.fechaDePedido&&e.falloInput}},[a("b-badge",{attrs:{variant:"danger"}},[e._v("Ingrese la fecha de pedido")])],1),a("b-form-datepicker",{staticClass:"mb-2",attrs:{placeholder:"Seleccione fecha de Pedido",state:!(!e.egreso.documentoComercial.fechaDePedido&&e.falloInput)&&null},model:{value:e.egreso.documentoComercial.fechaDePedido,callback:function(t){e.$set(e.egreso.documentoComercial,"fechaDePedido",t)},expression:"egreso.documentoComercial.fechaDePedido"}})],1)]),a("div",{staticClass:"row mb-2"},[e._m(9),a("div",{staticClass:"col"},[a("b-collapse",{attrs:{visible:!e.egreso.documentoComercial.fechaDeEntrega&&e.falloInput}},[a("b-badge",{attrs:{variant:"danger"}},[e._v("Ingrese la fecha de entrega")])],1),a("b-form-datepicker",{staticClass:"mb-2",attrs:{placeholder:"Seleccione fecha de Entrega",state:!(!e.egreso.documentoComercial.fechaDeEntrega&&e.falloInput)&&null},model:{value:e.egreso.documentoComercial.fechaDeEntrega,callback:function(t){e.$set(e.egreso.documentoComercial,"fechaDeEntrega",t)},expression:"egreso.documentoComercial.fechaDeEntrega"}})],1)]),a("div",{staticClass:"row mb-2"},[e._m(10),a("div",{staticClass:"col"},[a("b-col",{staticClass:"px-0 mx-0"},[a("b-form-textarea",{attrs:{rows:"3","max-rows":"6",placeholder:"Breve descripción"},model:{value:e.egreso.documentoComercial.descripcion,callback:function(t){e.$set(e.egreso.documentoComercial,"descripcion",t)},expression:"egreso.documentoComercial.descripcion"}})],1)],1)]),a("div",{staticClass:"row mb-2"},[e._m(11),a("div",{staticClass:"col"},[a("b-col",{staticClass:"px-0 mx-0"},[a("b-input-group",{scopedSlots:e._u([{key:"append",fn:function(){return[a("b-button",{attrs:{variant:"outline-secondary"},on:{click:function(t){e.egreso.archivo=null}}},[a("b-icon-x")],1),a("b-button",{attrs:{variant:"outline-primary"},on:{click:e.uploadFileTest}},[a("b-icon-upload")],1)]},proxy:!0}])},[a("b-form-file",{attrs:{placeholder:"Seleccione un archivo o sueltelo aqui","drop-placeholder":"Suelta el archivo aqui...","browse-text":"Buscar"},model:{value:e.egreso.archivo,callback:function(t){e.$set(e.egreso,"archivo",t)},expression:"egreso.archivo"}})],1),a("b-collapse",{attrs:{visible:""!=e.archivoImagenUrl}},[a("b-img",{attrs:{src:e.archivoImagenUrl,fluid:""}})],1)],1)],1)])])]),a("div",{staticClass:"col-lg-1 col-xl-3"})]),a("div",{staticClass:"row mb-4 mx-2"},[e._m(12),a("div",{staticClass:"col"},[a("b-collapse",{attrs:{visible:!e.egreso.items.length&&e.falloInput}},[a("b-badge",{attrs:{variant:"danger"}},[e._v("Ingrese por lo menos un item")])],1),a("tabla-items",{attrs:{actualizarItems:e.actualizarItems}})],1),a("div",{staticClass:"col-lg-1 col-xl-3"})]),a("div",{staticClass:"row mb-4 mx-2"},[e._m(13),a("div",{staticClass:"col"},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-agregar-presupuesto",modifiers:{"modal-agregar-presupuesto":!0}}],attrs:{variant:"outline-primary"}},[a("b-icon-plus"),e._v(" Cargar Presupuestos ")],1),e.presupuestosAAgregar.length?a("div",{staticClass:"pt-2"},[a("p",[e._v("Al egreso se le asociaran los siguientes presupuestos: ")]),a("b-table",{staticClass:"mb-0 rounded",attrs:{small:"",fields:e.presupuestosAAgregarCampos,items:e.presupuestosAAgregar},scopedSlots:e._u([{key:"cell(fechaVigente)",fn:function(t){return[e._v(" "+e._s(e.convertDate(t.item.fechaVigente))+" ")]}},{key:"cell(items)",fn:function(t){return[e._v(" "+e._s(t.item.items.length)+" ")]}},{key:"cell(delete)",fn:function(t){return[a("b-button",{staticClass:"p-0 m-0 text-danger",attrs:{variant:"outline"},on:{click:function(a){return e.removerPresupuesto(t.index)}}},[a("b-icon-x")],1)]}}],null,!1,1753986955)})],1):e._e()],1),a("div",{staticClass:"col-lg-1 col-xl-3"})]),a("div",{staticClass:"row mb-4 mx-2"},[e._m(14),a("div",{staticClass:"col"},[a("b-button-group",{staticClass:"w-100"},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-asociar-ingreso",modifiers:{"modal-asociar-ingreso":!0}}]},[e._v("Asociar a Ingreso")]),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-asociar-categoria",modifiers:{"modal-asociar-categoria":!0}}]},[e._v("Asociar a Categorías")])],1),e.ingresoAAsociar?a("div",{staticClass:"pt-2"},[e.ingresoAAsociar?a("b-collapse",{attrs:{visible:e.precioTotal()>e.ingresoAAsociar.montoTotal}},[a("b-badge",{attrs:{variant:"danger"}},[e._v("El egreso supera el monto del ingreso")])],1):e._e(),a("span",[e._v("El egreso se asociará al siguiente ingreso: ")]),a("b-badge",[e._v(e._s(e.ingresoAAsociar.descripcion+" - $"+e.ingresoAAsociar.montoTotal))])],1):e._e(),e.categoriasAAsociar.length?a("div",{staticClass:"pt-2"},[a("span",[e._v("El egreso se asociará a las siguientes categorías: ")]),e._l(e.categoriasAAsociar,(function(t,o){return[a("b-badge",{key:o,staticClass:"mr-1"},[e._v(e._s(t.name))])]}))],2):e._e()],1),a("div",{staticClass:"col-lg-1 col-xl-3"})]),a("div",{staticClass:"row mb-4 mx-2"},[e._m(15),a("div",{staticClass:"col px-2"},[a("b-form-checkbox",{staticClass:"py-2 ml-2",model:{value:e.suscribirse,callback:function(t){e.suscribirse=t},expression:"suscribirse"}},[e._v("Suscribirse a este egreso")])],1),a("div",{staticClass:"col-lg-1 col-xl-3"})]),a("div",{staticClass:"row mb-4 mx-2"},[a("div",{staticClass:"col-sm-4 col-lg-3 text-sm-right py-2"}),a("div",{staticClass:"col"},[a("b-collapse",{attrs:{visible:e.falloInput}},[a("b-badge",{attrs:{variant:"danger"}},[e._v("Hay problemas en los campos")])],1),a("b-collapse",{attrs:{visible:e.falloCarga}},[a("b-badge",{attrs:{variant:"danger"}},[e._v("Hubo un problema al cargar el egreso")])],1),a("b-button-group",[a("b-button",{attrs:{variant:"primary"},on:{click:e.confirmar}},[e._v("Confirmar")]),a("b-button",{attrs:{variant:"outline-dark",to:"/operaciones/egreso"}},[e._v("Cancelar")])],1)],1),a("div",{staticClass:"col-lg-1 col-xl-3"})]),a("b-modal",{attrs:{id:"modal-asociar-categoria","hide-footer":"",scrollable:"",centered:"",title:"Asociar a Categoría"}},[a("asociar-categoria",{attrs:{confirmarAccion:e.confirmarAsociarCategorias,cancelarAccion:e.cancelarAsociarCategorias}})],1),a("b-modal",{attrs:{id:"modal-asociar-ingreso","hide-footer":"",scrollable:"",centered:"",title:"Asociar a Ingreso"}},[a("asociar-ingreso",{attrs:{confirmarAccion:e.confirmarAsociarIngreso,cancelarAccion:e.cancelarAsociarIngreso}})],1),a("b-modal",{attrs:{id:"modal-agregar-proveedor",size:"xl","hide-footer":"",scrollable:"",centered:"",title:"Crear nuevo Proveedor"}},[a("agregar-proveedor",{attrs:{confirmarAccion:e.confirmarNuevoProveedor,cancelarAccion:e.cancelarNuevoProveedor}})],1),a("b-modal",{attrs:{id:"modal-agregar-presupuesto",size:"xl","hide-footer":"",scrollable:"",centered:"",title:"Crear nuevo Presupuesto"}},[a("agregar-presupuesto",{ref:"agregarPresupuesto",attrs:{confirmarAccion:e.confirmarNuevoPresupuesto,cancelarAccion:e.cancelarNuevoPresupuesto}})],1)],1)},ht=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row mb-4 mx-2"},[a("div",{staticClass:"col py-2 text-center"},[a("h2",[e._v("Cargar nuevo egreso")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 col-lg-3 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Organización")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 col-lg-3 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Fecha Operación")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 col-lg-3 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Proveedor")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 col-lg-3 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Medio de Pago")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 col-lg-3 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Documento comercial")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Tipo")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Número documento")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Fecha de Pedido")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Fecha de Entrega")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Descripción")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Archivo")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 col-lg-3 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Items")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 col-lg-3 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Presupuestos")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 col-lg-3 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Acciones")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 col-lg-3 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Suscribirse")])])])}],bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row mb-4 mx-2"},[e._m(0),a("div",{staticClass:"col px-2"},[a("b-collapse",{attrs:{visible:!e.proveedor.nombre&&e.falloInput}},[a("b-badge",{attrs:{variant:"danger"}},[e._v("Ingrese el nombre del proveedor")])],1),a("b-form-input",{attrs:{placeholder:"Ingrese nombre del proveedor",state:!(!e.proveedor.nombre&&e.falloInput)&&null},model:{value:e.proveedor.nombre,callback:function(t){e.$set(e.proveedor,"nombre",t)},expression:"proveedor.nombre"}})],1)]),a("div",{staticClass:"row mb-4 mx-2"},[e._m(1),a("div",{staticClass:"col px-2"},[a("b-collapse",{attrs:{visible:!e.proveedor.documento&&e.falloInput}},[a("b-badge",{attrs:{variant:"danger"}},[e._v("Ingrese documento del proveedor")])],1),a("b-form-input",{attrs:{placeholder:"Ingrese documento del proveedor",state:!(!e.proveedor.documento&&e.falloInput)&&null},model:{value:e.proveedor.documento,callback:function(t){e.$set(e.proveedor,"documento",t)},expression:"proveedor.documento"}})],1)]),a("div",{staticClass:"row mb-4 mx-2"},[e._m(2),a("div",{staticClass:"col p-2"},[a("div",{staticClass:"p-2 container-fluid border border rounded"},[a("div",{staticClass:"row mb-2"},[e._m(3),a("div",{staticClass:"col"},[a("b-collapse",{attrs:{visible:!e.proveedor.pais&&e.falloInput}},[a("b-badge",{attrs:{variant:"danger"}},[e._v("Seleccione un país")])],1),a("b-overlay",{attrs:{"spinner-variant":"primary",show:e.paisesLoading,rounded:"sm"}},[a("b-form-select",{attrs:{state:!(!e.proveedor.pais&&e.falloInput)&&null,options:e.paises},on:{change:e.cargarProvinciasAPI},scopedSlots:e._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null,disabled:""}},[e._v("-- Selecciona un país --")])]},proxy:!0}]),model:{value:e.proveedor.pais,callback:function(t){e.$set(e.proveedor,"pais",t)},expression:"proveedor.pais"}})],1)],1)]),a("div",{staticClass:"row mb-2"},[e._m(4),a("div",{staticClass:"col"},[a("b-collapse",{attrs:{visible:!e.proveedor.provincia&&e.falloInput}},[a("b-badge",{attrs:{variant:"danger"}},[e._v("Seleccione una provincia")])],1),a("b-overlay",{attrs:{"spinner-variant":"primary",show:e.provinciasLoading,rounded:"sm"}},[a("b-form-select",{attrs:{state:!(!e.proveedor.provincia&&e.falloInput)&&null,options:e.provincias},on:{change:e.cargarCiudadesAPI},scopedSlots:e._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null,disabled:""}},[e._v("-- Selecciona una provincia --")])]},proxy:!0}]),model:{value:e.proveedor.provincia,callback:function(t){e.$set(e.proveedor,"provincia",t)},expression:"proveedor.provincia"}})],1)],1)]),a("div",{staticClass:"row mb-2"},[e._m(5),a("div",{staticClass:"col"},[a("b-collapse",{attrs:{visible:!e.proveedor.ciudad&&e.falloInput}},[a("b-badge",{attrs:{variant:"danger"}},[e._v("Seleccione una ciudad")])],1),a("b-overlay",{attrs:{"spinner-variant":"primary",show:e.ciudadesLoading,rounded:"sm"}},[a("b-form-select",{attrs:{state:!(!e.proveedor.ciudad&&e.falloInput)&&null,options:e.ciudades},scopedSlots:e._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null,disabled:""}},[e._v("-- Selecciona una ciudad --")])]},proxy:!0}]),model:{value:e.proveedor.ciudad,callback:function(t){e.$set(e.proveedor,"ciudad",t)},expression:"proveedor.ciudad"}})],1)],1)]),a("div",{staticClass:"row mb-2"},[e._m(6),a("div",{staticClass:"col"},[a("b-collapse",{attrs:{visible:!e.proveedor.calle&&e.falloInput}},[a("b-badge",{attrs:{variant:"danger"}},[e._v("Ingrese calle")])],1),a("b-form-input",{attrs:{placeholder:"Ingrese calle",state:!(!e.proveedor.calle&&e.falloInput)&&null},model:{value:e.proveedor.calle,callback:function(t){e.$set(e.proveedor,"calle",t)},expression:"proveedor.calle"}})],1)]),a("div",{staticClass:"row mb-2"},[e._m(7),a("div",{staticClass:"col"},[a("b-collapse",{attrs:{visible:!e.proveedor.altura&&e.falloInput}},[a("b-badge",{attrs:{variant:"danger"}},[e._v("Ingrese altura")])],1),a("b-form-input",{attrs:{placeholder:"Ingrese altura",state:!(!e.proveedor.altura&&e.falloInput)&&null},model:{value:e.proveedor.altura,callback:function(t){e.$set(e.proveedor,"altura",t)},expression:"proveedor.altura"}})],1)]),a("div",{staticClass:"row mb-2"},[e._m(8),a("div",{staticClass:"col"},[a("b-collapse",{attrs:{visible:!e.proveedor.piso&&e.falloInput}},[a("b-badge",{attrs:{variant:"danger"}},[e._v("Ingrese piso")])],1),a("b-form-input",{attrs:{placeholder:"Ingrese piso",state:!(!e.proveedor.piso&&e.falloInput)&&null},model:{value:e.proveedor.piso,callback:function(t){e.$set(e.proveedor,"piso",t)},expression:"proveedor.piso"}})],1)]),a("div",{staticClass:"row"},[e._m(9),a("div",{staticClass:"col"},[a("b-collapse",{attrs:{visible:!e.proveedor.codigoPostal&&e.falloInput}},[a("b-badge",{attrs:{variant:"danger"}},[e._v("Ingrese codigo postal")])],1),a("b-form-input",{attrs:{placeholder:"Ingrese codigo postal",state:!(!e.proveedor.codigoPostal&&e.falloInput)&&null},model:{value:e.proveedor.codigoPostal,callback:function(t){e.$set(e.proveedor,"codigoPostal",t)},expression:"proveedor.codigoPostal"}})],1)])])])]),a("div",{staticClass:"row mb-4 mx-2"},[a("div",{staticClass:"col-4"}),a("div",{staticClass:"col px-2"},[a("b-collapse",{attrs:{visible:e.falloInput}},[a("b-badge",{attrs:{variant:"danger"}},[e._v("Hay problemas en los campos")])],1),a("b-button-group",[a("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.confirmar()}}},[e._v("Confirmar")]),a("b-button",{attrs:{variant:"outline-dark"},on:{click:e.cancelarAccion}},[e._v("Cancelar")])],1)],1)])])},Ct=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Nombre")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Documento")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Dirección Postal")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Pais")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Provincia")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Ciudad")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Calle")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Altura")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Piso")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Codigo Postal")])])])}],_t=(a("99af"),{props:{confirmarAccion:Function,cancelarAccion:Function},data:function(){return{proveedor:{nombre:null,documento:null,pais:null,provincia:null,ciudad:null,calle:"",altura:"",piso:"",codigoPostal:""},paises:[],provincias:[],ciudades:[],paisesLoading:!1,provinciasLoading:!1,ciudadesLoading:!1,falloInput:!1}},inject:["showLoginModal","errorHandling"],methods:{confirmar:function(){var e=this.proveedor.nombre&&this.proveedor.documento&&this.proveedor.pais&&this.proveedor.provincia&&this.proveedor.ciudad&&this.proveedor.calle&&this.proveedor.altura&&this.proveedor.piso&&this.proveedor.codigoPostal;this.falloInput=!e,this.falloInput||this.confirmarAccion&&this.confirmarAccion(this.proveedor)},cargarPaisesAPI:function(){var e=this;this.loadingPaises=!0,this.proveedor.pais=null,this.proveedor.provincia=null,this.proveedor.ciudad=null,w.get("/api/pais",{success:function(t){e.paises=t.data.map((function(e){return{value:e.clave,text:e.name}}))},notLoggedIn:function(){e.showLoginModal(!0)},error:function(t){e.errorHandling(t)},always:function(){e.loadingPaises=!1}})},cargarProvinciasAPI:function(){var e=this;this.provinciasLoading=!0,this.proveedor.provincia=null,this.proveedor.ciudad=null;var t=this.proveedor.pais;null!=t&&w.get("/api/pais/".concat(t,"/provincia"),{success:function(t){e.provincias=t.data.map((function(e){return{value:e.clave,text:e.name}}))},notLoggedIn:function(){e.showLoginModal(!0)},error:function(t){e.errorHandling(t)},always:function(){e.provinciasLoading=!1}})},cargarCiudadesAPI:function(){var e=this;this.proveedor.ciudad=null,this.ciudadesLoading=!0;var t=this.proveedor.pais,a=this.proveedor.provincia;null!=t&&null!=a&&w.get("/api/pais/".concat(t,"/provincia/").concat(a,"/ciudad"),{success:function(t){e.ciudades=t.data.map((function(e){return{value:e.clave,text:e.name}}))},notLoggedIn:function(){e.showLoginModal(!0)},error:function(t){e.errorHandling(t)},always:function(){e.ciudadesLoading=!1}})}},watch:{proveedor:function(){console.log("changed")}},mounted:function(){this.cargarPaisesAPI()}}),xt=_t,yt=Object(u["a"])(xt,bt,Ct,!1,null,null,null),wt=yt.exports,It=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row mb-4 mx-2"},[e._m(0),a("div",{staticClass:"col px-2"},[a("b-form-datepicker",{staticClass:"mb-2",attrs:{placeholder:"Seleccione fecha de vigencia"},model:{value:e.presupuesto.fechaVigente,callback:function(t){e.$set(e.presupuesto,"fechaVigente",t)},expression:"presupuesto.fechaVigente"}})],1)]),a("div",{staticClass:"row mb-4 mx-2"},[e._m(1),a("div",{staticClass:"col px-2"},[a("b-form-input",{attrs:{placeholder:"Ingrese número de operacion"},model:{value:e.presupuesto.numeroOperacion,callback:function(t){e.$set(e.presupuesto,"numeroOperacion",t)},expression:"presupuesto.numeroOperacion"}})],1)]),a("div",{staticClass:"row mb-4 mx-2"},[e._m(2),a("div",{staticClass:"col p-2"},[a("tabla-items",{attrs:{actualizarItems:e.actualizarItems}})],1)]),a("div",{staticClass:"row mb-4 mx-2"},[a("div",{staticClass:"col-4"}),a("div",{staticClass:"col d-flex justify-content-between px-2"},[a("b-button-group",[a("b-button",{attrs:{variant:"primary"},on:{click:e.confirmar}},[e._v("Confirmar")]),a("b-button",{attrs:{variant:"outline-dark"},on:{click:e.cancelarAccion}},[e._v("Cancelar")])],1)],1)])])},Pt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Fecha Vigente")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Número operación")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Items")])])])}],kt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-table",{staticClass:"mb-0 rounded",attrs:{small:"",responsive:"",hover:"",bordered:"",fields:e.campos_items,items:e.items,"head-variant":"dark","foot-variant":"light","foot-clone":""},scopedSlots:e._u([{key:"cell(tipoItem)",fn:function(t){return[a("b-form-select",{staticClass:"border-0 px-2 bg-transparent",on:{input:e.addItem},model:{value:t.item.tipoItem,callback:function(a){e.$set(t.item,"tipoItem",a)},expression:"row.item.tipoItem"}},[a("b-form-select-option",{attrs:{value:null}},[e._v("--Tipo--")]),a("b-form-select-option",{attrs:{value:"1"}},[e._v("Producto")]),a("b-form-select-option",{attrs:{value:"0"}},[e._v("Servicio")])],1)]}},{key:"cell(descripcion)",fn:function(t){return[a("b-form-input",{staticClass:"border-0 px-2 bg-transparent",on:{input:e.addItem},model:{value:t.item.nombreProducto,callback:function(a){e.$set(t.item,"nombreProducto",a)},expression:"row.item.nombreProducto"}})]}},{key:"cell(precio)",fn:function(t){return[a("b-form-input",{staticClass:"border-0 px-2 bg-transparent text-center",on:{input:e.addItem},model:{value:t.item.precio,callback:function(a){e.$set(t.item,"precio",a)},expression:"row.item.precio"}})]}},{key:"cell(cantidad)",fn:function(t){return[a("b-form-input",{staticClass:"border-0 px-2 bg-transparent text-center",on:{input:e.addItem},model:{value:t.item.cantidad,callback:function(a){e.$set(t.item,"cantidad",a)},expression:"row.item.cantidad"}})]}},{key:"cell(delete)",fn:function(t){return[a("b-button",{staticClass:"px-2 m-0 text-danger",attrs:{variant:"outline"},on:{click:function(a){return e.deleteItem(t.index)}}},[a("b-icon-x")],1)]}},{key:"foot(tipoItem)",fn:function(){return[a("span",{staticClass:"text-danger"})]},proxy:!0},{key:"foot(descripcion)",fn:function(){return[a("span",{staticClass:"text-danger"})]},proxy:!0},{key:"foot(cantidad)",fn:function(){return[a("span",{staticClass:"text-danger"},[e._v("Total")])]},proxy:!0},{key:"foot(precio)",fn:function(){return[a("span",{staticClass:"text-danger"},[e._v(e._s("$"+e.precioTotal()))])]},proxy:!0}])})},At=[],St={props:{actualizarItems:Function},data:function(){return{items:[{tipoItem:0,nombreProducto:"",cantidad:"",precio:""}],campos_items:[{key:"tipoItem",label:"Tipo",thClass:["tipo-th"]},{key:"descripcion",label:"Descripcion",thClass:["w-75"]},{key:"cantidad",label:"Cantidad",tdClass:[],thClass:["text-center"]},{key:"precio",label:"Precio",tdClass:[],thClass:["text-center","precio-th"]},{key:"delete",label:"",tdClass:[],thClass:["text-center"]}]}},methods:{checkIfAddItem:function(){var e=this.items,t=e.length-1,a=e[t];return void 0==a||""!=a.nombreProducto||""!=a.cantidad||""!=a.precio},addItem:function(){this.checkIfAddItem()&&this.items.push({tipoItem:null,nombreProducto:"",cantidad:"",precio:""}),this.actualizarItems(this.items)},deleteItem:function(e){this.items.splice(e,1),this.addItem()},precioTotal:function(){var e=0;return this.items.forEach((function(t){var a=parseFloat(t.precio),o=parseInt(t.cantidad);isNaN(a)||isNaN(o)||(e+=a*o)})),e}}},Lt=St,$t=(a("d2b5"),Object(u["a"])(Lt,kt,At,!1,null,null,null)),Et=$t.exports,Ot={props:{confirmarAccion:Function,cancelarAccion:Function},data:function(){return{presupuesto:{fechaVigente:null,numeroOperacion:null,items:[]}}},methods:{confirmar:function(){if(void 0!=this.confirmarAccion&&void 0!=this.cancelarAccion)return this.presupuesto.items.pop(),void this.confirmarAccion(this.presupuesto)},actualizarItems:function(e){this.presupuesto.items=e}},components:{"tabla-items":Et},watch:{"egreso.medioDePago.id":function(e){}}},Dt=Ot,jt=Object(u["a"])(Dt,It,Pt,!1,null,null,null),Mt=jt.exports,Tt={data:function(){return{egreso:{fechaOperacion:null,proveedor:null,medioDePago:{id:null,dato:null},documentoComercial:{tipo:null,numeroDocumento:null,fechaDePedido:null,fechaDeEntrega:null,descripcion:null},items:[],archivo:null},idEgreso:null,falloInput:!1,falloCarga:!1,proveedoresSelect:[],mediosDePagoSelect:[],mediosDePagoType:{credit_card:[]},tipoDocumentoSelect:[{value:1,text:"Factura A"},{value:2,text:"Factura B"},{value:3,text:"Factura C"}],proveedoresLoading:!1,mediosDePagoLoading:!1,egresoLoading:!1,archivoProgress:0,suscribirse:!1,proveedorAAgregar:null,presupuestosAAgregar:[],categoriasAAsociar:[],ingresoAAsociar:null,presupuestosAAgregarCampos:[{key:"fechaVigente",tdClass:["w-50"],thClass:["w-50"]},{key:"numeroOperacion",tdClass:["w-50"],thClass:["w-50"]},{key:"items",tdClass:["text-center"],thClass:["text-center"]},{key:"delete",label:"",tdClass:[],thClass:["text-center"]}],archivoImagenUrl:""}},computed:{state:function(e){return console.log(e),!1}},inject:["errorHandling","createToast","showLoginModal"],watch:{"egreso.archivo":function(){var e=this;if(this.egreso.archivo){if("image/png"==this.egreso.archivo.type||"image/jpeg"==this.egreso.archivo.type||"image/gif"==this.egreso.archivo.type){var t=new FileReader;t.onload=function(){var a=t.result;e.archivoImagenUrl=a},t.readAsDataURL(this.egreso.archivo)}}else this.archivoImagenUrl=""}},methods:{getCookie:x,uploadFileTest:function(){var e=this;console.log(this.egreso.archivo);var t=new FormData;t.append("arhivo",this.egreso.archivo);var a={onUploadProgress:function(t){var a=Math.round(100*t.loaded/t.total);e.archivoProgress=a}};this.egresoLoading=!0,w.post("/api/operaciones/egreso/cargarArchivos",t,{success:function(e){console.log(e)},notLoggedIn:function(t){e.showLoginModal(!1)},failed:function(e){console.log(e)},error:function(e){console.log(e)},always:function(){e.egresoLoading=!1,e.archivoProgress=0}},a)},confirmar:function(){this.egresoLoading=!0;var e=this.egreso.fechaOperacion&&this.egreso.proveedor&&this.egreso.medioDePago.id&&this.egreso.medioDePago.dato&&this.egreso.documentoComercial.tipo&&this.egreso.documentoComercial.numeroDocumento&&this.egreso.documentoComercial.fechaDePedido&&this.egreso.documentoComercial.fechaDeEntrega&&this.egreso.items.length>1;null!=this.ingresoAAsociar&&(e=this.precioTotal()<=this.ingresoAAsociar.montoTotal),this.falloInput=!e,this.falloInput?this.egresoLoading=!1:this.crearProveedorAPI()},crearProveedorAPI:function(){var e=this;null!=this.proveedorAAgregar?(console.log("POST '/api/proveedor'"),console.log(JSON.stringify(this.proveedorAAgregar,null,4)),w.post("/api/proveedor",this.proveedorAAgregar,{success:function(t){e.createToast("Guardado exitoso","Se creó el proveedor exitosamente","success"),e.egreso.proveedor=t.id,e.crearEgresoAPI()},notLoggedIn:function(){e.showLoginModal(!0)},failed:function(){e.falloCarga=!0},error:function(t){e.errorHandling(t),e.falloCarga=!0}})):this.crearEgresoAPI()},crearEgresoAPI:function(){var e=this,t=JSON.parse(JSON.stringify(this.egreso));t.items.pop(),console.log("POST '/api/operaciones/egreso'"),console.log(JSON.stringify(t,null,4)),w.post("/api/operaciones/egreso",t,{success:function(t){e.createToast("Guardado exitoso","Se creó el egreso correctamente","success"),e.idEgreso=t.id,e.crearPresupuestosAPI()},notLoggedIn:function(){e.showLoginModal(!0)},failed:function(){e.falloCarga=!0},error:function(t){e.errorHandling(t),e.falloCarga=!0}})},crearPresupuestosAPI:function(){this.$refs.agregarPresupuesto.crearPresupuestosAPI(),this.asociarCategoriasAPI()},asociarCategoriasAPI:function(){var e=this;if(this.categoriasAAsociar.length){var t={id:this.idEgreso,categorias:this.categoriasAAsociar.map((function(e){return e.id}))};console.log("POST '/api/categorias/asociar'"),console.log(JSON.stringify(t,null,4)),w.post("/api/categorias/asociar",t,{success:function(t){e.createToast("Guardado exitoso","Se asoció a categorías exitosamente","success"),e.asociarIngresoAPI()},notLoggedIn:function(){e.showLoginModal(!0)},failed:function(){e.falloCarga=!0},error:function(t){e.errorHandling(t),e.falloCarga=!0}})}else this.asociarIngresoAPI()},asociarIngresoAPI:function(){var e=this;if(this.ingresoAAsociar){var t={ingresoId:this.ingresoAAsociar.id,egresoId:this.idEgreso};console.log("POST '/api/operaciones/asociarManualmente'"),console.log(JSON.stringify(t,null,4)),w.post("/api/operaciones/asociarManualmente",t,{success:function(t){e.createToast("Guardado exitoso","Se asoció al ingreso exitosamente","success"),e.$router.push("/operaciones/egreso")},notLoggedIn:function(){e.showLoginModal(!0)},failed:function(){e.falloCarga=!0},error:function(t){e.errorHandling(t),e.falloCarga=!0}})}else this.$router.push("/operaciones/egreso")},cargarProveedoresAPI:function(){var e=this;this.proveedoresLoading=!0,w.get("/api/proveedores",{success:function(t){e.proveedoresSelect=t.data.map(e.proveedoresAPIConverter)},notLoggedIn:function(){e.showLoginModal(!0)},error:function(t){e.errorHandling(t)},always:function(){e.proveedoresLoading=!1}})},proveedoresAPIConverter:function(e){return{value:e.id,text:e.nombre}},cargarMediosDePagoAPI:function(){var e=this;this.mediosDePagoLoading=!0,w.get("/api/medios",{success:function(t){e.mediosDePagoSelect=t.data.map(e.mediosDePagoAPIConverter)},notLoggedIn:function(){e.showLoginModal(!0)},error:function(t){e.errorHandling(t)},always:function(){e.mediosDePagoLoading=!1}})},mediosDePagoAPIConverter:function(e){return{value:e.id,text:e.medioDePago.charAt(0).toUpperCase()+e.medioDePago.slice(1),type:e.medioDePago}},actualizarItems:function(e){this.egreso.items=e},confirmarNuevoProveedor:function(e){this.$bvModal.hide("modal-agregar-proveedor"),this.proveedorAAgregar=e,this.egreso.proveedor="nuevoProveedor"},cancelarNuevoProveedor:function(){this.$bvModal.hide("modal-agregar-proveedor")},confirmarNuevoPresupuesto:function(e){this.$bvModal.hide("modal-agregar-presupuesto"),this.presupuestosAAgregar.push(e)},cancelarNuevoPresupuesto:function(){this.$bvModal.hide("modal-agregar-presupuesto")},removerPresupuesto:function(e){this.presupuestosAAgregar.splice(e,1)},confirmarAsociarCategorias:function(e){this.$bvModal.hide("modal-asociar-categoria"),this.categoriasAAsociar=e},cancelarAsociarCategorias:function(){this.$bvModal.hide("modal-asociar-categoria")},confirmarAsociarIngreso:function(e){this.$bvModal.hide("modal-asociar-ingreso"),this.ingresoAAsociar=e},cancelarAsociarIngreso:function(){this.$bvModal.hide("modal-asociar-ingreso")},precioTotal:function(){var e=0;return this.egreso.items.forEach((function(t){var a=parseFloat(t.precio),o=parseInt(t.cantidad);isNaN(a)||isNaN(o)||(e+=a*o)})),e}},mounted:function(){this.cargarProveedoresAPI(),this.cargarMediosDePagoAPI()},components:{"tabla-items":Et,"asociar-categoria":Pe,"asociar-ingreso":Ee,"agregar-proveedor":wt,"agregar-presupuesto":Mt}},Nt=Tt,Ft=(a("f040"),Object(u["a"])(Nt,ft,ht,!1,null,null,null)),Ht=Ft.exports,zt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pt-3"},[a("b-overlay",{attrs:{"spinner-variant":"light",variant:"primary",show:e.ingresoLoading,"no-wrap":""}}),e._m(0),a("div",{staticClass:"row mb-4 mx-2"},[e._m(1),a("div",{staticClass:"col"},[a("b-select",{attrs:{options:e.entidadesOptions},model:{value:e.ingreso.organizacion_id,callback:function(t){e.$set(e.ingreso,"organizacion_id",t)},expression:"ingreso.organizacion_id"}})],1),a("div",{staticClass:"col-lg-1 col-xl-3"})]),a("div",{staticClass:"row mb-4 mx-2"},[e._m(2),a("div",{staticClass:"col"},[a("b-collapse",{attrs:{visible:!e.ingreso.descripcion&&e.falloInput}},[a("b-badge",{attrs:{variant:"danger"}},[e._v("Ingrese una descripcion para poder identificar el ingreso")])],1),a("b-form-textarea",{attrs:{rows:"3","max-rows":"6",placeholder:"Breve descripción",state:!(!e.ingreso.descripcion&&e.falloInput)&&null},model:{value:e.ingreso.descripcion,callback:function(t){e.$set(e.ingreso,"descripcion",t)},expression:"ingreso.descripcion"}})],1),a("div",{staticClass:"col-lg-1 col-xl-3"})]),a("div",{staticClass:"row mb-4 mx-2"},[e._m(3),a("div",{staticClass:"col"},[a("b-collapse",{attrs:{visible:!e.ingreso.fechaOperacion&&e.falloInput}},[a("b-badge",{attrs:{variant:"danger"}},[e._v("Ingrese la fecha de la operacion")])],1),a("b-form-datepicker",{staticClass:"mb-2",attrs:{placeholder:"Seleccione fecha de la Operación",state:!(!e.ingreso.fechaOperacion&&e.falloInput)&&null},model:{value:e.ingreso.fechaOperacion,callback:function(t){e.$set(e.ingreso,"fechaOperacion",t)},expression:"ingreso.fechaOperacion"}})],1),a("div",{staticClass:"col-lg-1 col-xl-3"})]),a("div",{staticClass:"row mb-4 mx-2"},[e._m(4),a("div",{staticClass:"col"},[a("b-collapse",{attrs:{visible:!e.ingreso.montoTotal&&e.falloInput}},[a("b-badge",{attrs:{variant:"danger"}},[e._v("Ingrese el monto total")])],1),a("b-form-input",{attrs:{placeholder:"Ingrese monto total",state:!(!e.ingreso.montoTotal&&e.falloInput)&&null},model:{value:e.ingreso.montoTotal,callback:function(t){e.$set(e.ingreso,"montoTotal",t)},expression:"ingreso.montoTotal"}})],1),a("div",{staticClass:"col-lg-1 col-xl-3"})]),a("div",{staticClass:"row mb-4 mx-2"},[a("div",{staticClass:"col-sm-4 col-lg-3 text-sm-right py-2"}),a("div",{staticClass:"col"},[a("b-collapse",{attrs:{visible:e.falloInput}},[a("b-badge",{attrs:{variant:"danger"}},[e._v("Hay problemas en los campos")])],1),a("b-collapse",{attrs:{visible:e.falloCargarIngreso}},[a("b-badge",{attrs:{variant:"danger"}},[e._v("Hubo un problema al cargar el ingreso")])],1),a("b-button-group",[a("b-button",{attrs:{variant:"primary"},on:{click:e.confirmar}},[e._v("Confirmar")]),a("b-button",{attrs:{variant:"outline-dark",to:"/operaciones/ingreso"}},[e._v("Cancelar")])],1)],1),a("div",{staticClass:"col-lg-1 col-xl-3"})])],1)},Vt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row mb-4 mx-2"},[a("div",{staticClass:"col py-2 text-center"},[a("h2",[e._v("Cargar nuevo ingreso")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 col-lg-3 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Entidad")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 col-lg-3 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Descripción")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 col-lg-3 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Fecha Operación")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-sm-4 col-lg-3 text-sm-right py-2"},[a("span",{staticClass:"mr-2"},[a("strong",[e._v("Monto Total")])])])}],Jt={data:function(){return{ingreso:{organizacion_id:null,fechaOperacion:null,fechaAceptacionEgresos:null,descripcion:null,montoTotal:null},entidadesOptions:[{text:"xd",value:1}],falloInput:!1,falloCargarIngreso:!1,ingresoLoading:!1}},computed:{state:function(e){return console.log(e),!1}},inject:["errorHandling","createToast","showLoginModal"],methods:{getCookie:x,confirmar:function(){var e=this,t=this.ingreso.fechaOperacion&&this.ingreso.montoTotal;if(this.falloInput=!t,!this.falloInput){this.ingresoLoading=!0,this.falloCargarIngreso=!1;var a=JSON.parse(JSON.stringify(this.ingreso));console.log("POST '/api/operaciones/ingreso'"),console.log(JSON.stringify(a,null,4)),w.post("/api/operaciones/ingreso",a,{success:function(t){e.createToast("Guardado exitoso","Se dio de alta el ingreso correctamente","success"),e.$router.push("/operaciones/ingreso")},notLoggedIn:function(){e.showLoginModal(!0)},failed:function(){e.falloCargarIngreso=!0},error:function(t){e.errorHandling(t)},always:function(){e.ingresoLoading=!1}})}}}},Ut=Jt,Bt=Object(u["a"])(Ut,zt,Vt,!1,null,null,null),Kt=Bt.exports,Gt=[{path:"/",component:D,children:[{name:"index",path:"",component:oe},{name:"agregarEgreso",path:"operaciones/egreso/agregar",component:Ht,meta:{breadcrumb:[{label:"Operaciones",type:"fixed",path:"/operaciones"},{label:"Egresos",type:"fixed",path:"/operaciones/egreso"},{label:"Agregar",type:"fixed",path:"/operaciones/egreso/agregar",active:!0}]}},{name:"agregarIngreso",path:"operaciones/ingreso/agregar",component:Kt,meta:{breadcrumb:[{label:"Operaciones",type:"fixed",path:"/operaciones"},{label:"Ingresos",type:"fixed",path:"/operaciones/ingreso"},{label:"Agregar",type:"fixed",path:"/operaciones/ingreso/agregar",active:!0}]}},{name:"operaciones",path:"operaciones",component:le,meta:{breadcrumb:[{label:"Operaciones",type:"fixed",path:"/operaciones",active:!0}]},children:[{name:"egresos",path:"egreso",component:He,meta:{breadcrumb:[{label:"Operaciones",type:"fixed",path:"/operaciones"},{label:"Egresos",type:"fixed",path:"/operaciones/egreso",active:!0}]},children:[{name:"egreso",path:":id",component:He,meta:{breadcrumb:[{label:"Operaciones",type:"fixed",path:"/operaciones"},{label:"Egresos",type:"fixed",path:"/operaciones/egreso"},{label:"id",type:"dynamic",dynamicText:"id",path:"/operaciones/egreso/id",active:!0}]}}]},{name:"ingresos",path:"ingreso",component:Ke,meta:{breadcrumb:[{label:"Operaciones",type:"fixed",path:"/operaciones"},{label:"Ingresos",type:"fixed",path:"/operaciones/ingreso",active:!0}]}}]},{name:"bandeja",path:"bandeja",component:We,meta:{breadcrumb:[{label:"Bandeja de Mensajes",type:"fixed",path:"/operaciones",active:!0}]},children:[{name:"mensaje",path:":id",component:We,meta:{breadcrumb:[{label:"Bandeja de Mensajes",type:"fixed",path:"/bandeja"},{label:"Mensaje id",type:"dynamic",dynamicText:"id",path:"/bandeja/id",active:!0}]}}]},{name:"cuenta",path:"cuenta",component:ot,meta:{breadcrumb:[{label:"Mi Cuenta",type:"fixed",path:"/cuenta",active:!0}]}},{name:"panel",path:"panel",component:lt,meta:{breadcrumb:[{label:"Admin Panel",type:"fixed",path:"/panel",active:!0}]},children:[{name:"configValidacion",path:"validaciones",component:vt,meta:{breadcrumb:[{label:"Admin Panel",type:"fixed",path:"/panel"},{label:"Validacion de Egresos",type:"fixed",path:"/panel/validaciones",active:!0}]}}]}]},{name:"login",path:"/login",component:H},{name:"error404",path:"/*",component:K},{name:"error500",path:"/*",component:W}],Rt=new s["a"]({routes:Gt,mode:"history"});Rt.beforeEach((function(e,t,a){null!=t.name&&"error404"!=t.name&&"error500"!=t.name&&"login"!=t.name||"error404"==e.name||"error500"==e.name||"login"==e.name?"login"==e.name?v.a.get("/api/login").then((function(e){var t=e.data;200==t.code?(document.cookie="username=".concat(t.nombre,"; path=/"),document.cookie="organizacion=".concat(t.organizacion.razonSocial,"; path=/"),a("/")):403==t.code&&a()})):a():v.a.get("/api/login").then((function(e){var t=e.data;200==t.code?(document.cookie="username=".concat(t.nombre,"; path=/"),document.cookie="organizacion=".concat(t.organizacion.razonSocial,"; path=/"),a()):403==t.code&&a("/login")})).catch((function(e){console.log("error500"),a({name:"error500"})}))}));var Yt=Rt;o["default"].use(r["a"]),o["default"].use(i["a"]),o["default"].use(s["a"]),o["default"].config.productionTip=!1,new o["default"]({el:"#app",router:Yt,render:function(e){return e(p)}})},"929a":function(e,t,a){e.exports=a.p+"img/utn_logo.cde9f232.png"},"9a12":function(e,t,a){},c69b:function(e,t,a){},cb73:function(e,t,a){"use strict";a("c69b")},d051:function(e,t,a){},d2b5:function(e,t,a){"use strict";a("8d27")},eea0:function(e,t,a){"use strict";a("7429")},f040:function(e,t,a){"use strict";a("1ffb")}});
//# sourceMappingURL=index.2ef22606.js.map